<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <title>About Angular</title>

    <link rel="stylesheet" href="./dist/reset.css" />
    <link rel="stylesheet" href="./dist/reveal.css" />
    <link rel="stylesheet" href="./dist/theme/black.css" />

    <meta
      http-equiv="Content-Security-Policy"
      content="frame-src * data: blob: ; "
    />

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css" />
    <script
      src="https://kit.fontawesome.com/492dfbd8db.js"
      crossorigin="anonymous"
    ></script>
    <style>
      /* TIMELINE */
    </style>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section>
          <section>
            <i
              style="font-size: 20rem; color: red"
              class="fa-brands fa-angular"
            ></i>
            <h2><span style="color: red">A</span>ngular</h2>
          </section>
          <section>
            <img
              src="https://www.metaltoad.com/sites/default/files/styles/large_personal_photo_870x500_/public/2020-05/angularjs-logo-blog-header_0.jpg?itok=CUBxFqam"
            />
          </section>
          <section><h2>Angular 2+</h2></section>
          <section>
            <h2>Angular è complicato...</h2>
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/d/d1/Architecture_of_an_Angular_2_application.png"
            />
          </section>
          <section>
            <h2>Angular è compilato</h2>
            <aside class="notes">
              Mentre quello che scriviamo in react è proprio javascript, quello
              che scriviamo in angular è codice angular/ts che viene compilato
              in js. + velocità, + complessità
            </aside>
          </section>
          <section>
            <h2>Non solo componenti</h2>
            <ul>
              <li class="fragment">Components</li>
              <li class="fragment">Services</li>
              <li class="fragment">Directives</li>
              <li class="fragment">Pipes</li>
              <li class="fragment">Modules</li>
            </ul>
          </section>
          <section>
            <h2>
              <a href="https://angular.io/cli" target="_blank">Angular CLI</a>
            </h2>
            <ul>
              <li class="fragment">creare un applicazione angular</li>
              <li class="fragment">generare elementi di angular</li>
              <li class="fragment">aggiungere dipendenze</li>
              <li class="fragment">update dipendenze</li>
              <li class="fragment">
                scripts di sviluppo (dev-server, build, test, etc.)
              </li>
              <li class="fragment">etc...</li>
            </ul>
          </section>
          <section><a href="./typescript.html">TypeScript</a></section>
          <section><h2>Dependency injection</h2></section>
          <section>
            <h2>css preprocessors integrati</h2>
            <ul>
              <li>css</li>
              <li>sass (scss)</li>
              <li>sass</li>
              <li>less</li>
            </ul>
          </section>
          <section>
            <p>
              <span style="color: violet">R</span>eactive e<span
                style="color: violet"
                >X</span
              >tensions for <span style="color: violet">J</span>ava<span
                style="color: violet"
                >S</span
              >cript
            </p>
            <img
              width="300"
              src="https://rxjs.dev/generated/images/marketing/home/Rx_Logo-512-512.png"
              alt=""
            />
          </section>

          <section>
            <h2>strutturato</h2>
          </section>

          <section>
            <h2>Grandi novità dalla versione 14</h2>
          </section>
        </section>

        <section>
          <section><h2>Angular CLI</h2></section>
          <section>ng new PROJECT_NAME</section>
          <section>
            <h2><a href="https://angular.io/cli/generate">Generate</a></h2>
            <p>ng g<span style="opacity: 0.7">enerate</span></p>
            <ul>
              <li>c<span style="opacity: 0.7">omponent</span></li>
              <li>s<span style="opacity: 0.7">ervice</span></li>
              <li>m<span style="opacity: 0.7">odule</span></li>
              <li>d<span style="opacity: 0.7">irective</span></li>
              <li>p<span style="opacity: 0.7">ipe</span></li>
              <li><span style="opacity: 0.7">etc.</span></li>
            </ul>
          </section>
          <section>ng add DEPENDENCY_NAME</section>
          <section>ng update</section>
        </section>

        <section>
          <section>
            <h1>Modules</h1>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers style="max-height: unset;">
                import { NgModule } from '@angular/core';
                import { CommonModule } from '@angular/common';
                @NgModule({
                  declarations: [
                    TitleComponent,
                    HighlightDirective,
                    CurrencyPipe
                  ],
                  imports: [
                    CommonModule
                  ],
                  exports: [
                    TitleComponent,
                    CurrencyPipe
                  ]
                })
                export class SomeModule {} 
              </code>
            </pre>
            <aside class="notes">
              declarations: elementi che vengono creati nel contesto di questo
              modulo. Hanno accesso agli altri elementi dichiarati ed a quello
              importati nel modulo. exports rende pubblici questi componenti a
              chi importa questo modulo. Il resto sono privati al modulo. Alcuni
              imports sono stati omessi
            </aside>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers style="max-height: unset;">
                import { SomeModule } from 'some-module.module'
                @NgModule({
                  declarations: [
                    SomeOtherComponent,
                    SomeOtherPipe,
                  ],
                  imports: [
                    CommonModule,
                    SomeModule
                  ],
                  exports: [
                    SomeOtherComponent
                  ]
                })
                export class SomeOtherModule {} 
              </code>
            </pre>
          </section>
          <section>
            <h2>
              Componenti, Direttive, e Pipes appartengono ad uno ed un solo
              modulo
            </h2>
          </section>
          <section>
            <h2>A cosa servono i moduli?</h2>
            <ul>
              <li class="fragment">modularità e separazione</li>
              <li class="fragment">organizzazione del codice</li>
              <li class="fragment">dependency injection</li>
            </ul>
            <aside class="notes">unità maggiore di composizione.</aside>
          </section>
        </section>

        <section>
          <section>
            <h1>Components</h1>
          </section>
          <section>
            <p>ng g c my-title</p>
            <ul>
              <li>my-title.component.ts</li>
              <li>my-title.component.html</li>
              <li>my-title.component.css</li>
              <li>my-title.component.spec.ts</li>
            </ul>
          </section>
          <section>
            <h2>@Component decorator</h2>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                import { Component } from '@angular/core';

                @Component({
                  selector: 'my-title',
                  template: `
                      &lt;h1&gt;My title&lt;/h1&gt;
                  `,
                  styles: ['h1 { color: red; font-size: 3rem }']
                })
                export class MyTitleComponent {} 
              </code>
            </pre>
            <aside class="notes">
              selector è un css selector con cui utilizzare il componente.
              Spesso omettero gli import. Menziona la view encapsulation
            </aside>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                @Component({
                  selector: 'my-title',
                  templateUrl: 'my-title.component.html',
                  styleUrls: ['my-title.component.scss']
                })
                export class MyTitleComponent {} 
              </code>
            </pre>
          </section>
          <section>
            <h2>interazione tra template e classe - data binding</h2>
            <aside class="notes">2 modi</aside>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="3,6">
                @Component({
                  selector: 'my-title',
                  template: '&lt;h1&gt;{{ myAwesomeTitle }}&lt;/h1&gt;',
                })
                export class MyTitleComponent {
                  myAwesomeTitle = 'Hello, world!'
                } 
              </code>
            </pre>
            <aside class="notes">
              è possibile inserire quasi qualsiasi espressione ts
            </aside>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="3,6">
                @Component({
                  selector: 'my-title',
                  template: '&lt;h1 [textContent]="myAwesomeTitle"&gt;&lt;/h1&gt;',
                })
                export class MyTitleComponent {
                  myAwesomeTitle = 'Hello, world!'
                } 
              </code>
            </pre>
          </section>
          <section>
            <h2>
              Il template reagisce al cambiamento dei dati collegati ad esso
            </h2>
          </section>
          <section>
            <h2>collegare funzionalità agli eventi - event binding</h2>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="3,6-8">
                @Component({
                  selector: 'my-button',
                  template: '&lt;button (click)="doSomething()"&gt;&lt;/button&gt;',
                })
                export class MyButtonComponent {
                  doSomething() {
                    console.log('Hello world!')
                  }
                } 
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="3,6-8">
                @Component({
                  selector: 'my-button',
                  template: '&lt;button (click)="logEvent($event)"&gt;&lt;/button&gt;',
                })
                export class MyButtonComponent {
                  logEvent(e: MouseEvent) {
                    console.log(e)
                  }
                } 
              </code>
            </pre>
          </section>
          <section>
            <h2>usare un componente</h2>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="3-6">
                @Component({
                  template: `
                    &lt;my-title&gt;&lt;/my-title&gt;
                    &lt;my-button&gt;&lt;/my-button&gt;
                  `,
                })
                export class AppComponent {} 
              </code>
            </pre>
            <aside class="notes">
              per poter utilizzare un componente in un template di un'altro
              componente, o dichiarati nello stesso modulo o il componente è
              esportato in un modulo che viene importato dal modulo che contiene
              il componente che lo usa. Quando dichiariamo un componente in un
              modulo, a compile time, angular registra il componente come fosse
              un elemento html custom, che lo ospita. è un elemento html
              qualunque che può reagire agli eventi, avere stile etc. Il suo
              contenuto è ciò che dichiaro nel template Questo elemento html è
              l'host: Un elemento html generico che lo ospita
            </aside>
          </section>
          <section>
            <h2>comunicazione tra componenti</h2>
          </section>
          <section>
            <h2>@Input decorator</h2>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="6">
                @Component({
                  selector: 'my-title',
                  template: '&lt;h1&gt;{{ title }}&lt;/h1&gt;',
                })
                export class MyTitleComponent {
                  @Input() title = 'Default title';
                } 
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="3-6">
                @Component({
                  template: `
                    &lt;my-title 
                      title="My awesome app!"
                    &gt;
                    &lt;/my-title&gt;
                  `,
                  stylesUrl: ['app.component.scss']
                })
                export class AppComponent {} 
              </code>
            </pre>
            <aside class="notes">
              per poter utilizzare un componente in un template di un'altro
              componente, o dichiarati nello stesso modulo o il componente è
              esportato in un modulo che viene importato dal modulo che contiene
              il componente che lo usa. Un elemento utilizzato
            </aside>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="3-6,11">
                @Component({
                  template: `
                    &lt;my-title 
                      [title]="appTitle"
                    &gt;
                    &lt;/my-title&gt;
                  `,
                  stylesUrl: ['app.component.scss']
                })
                export class AppComponent {
                  appTitle = 'My awesome app!'
                } 
              </code>
            </pre>
          </section>
          <section>
            <h2>@Output decorator</h2>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1,5-8,12">
                import { Component, EventEmitter, Output } from '@angular/core';
                @Component({
                  selector: 'my-button',
                  template: `
                  &lt;button 
                    (click)="buttonClicked.emit("i got clicked!!")"
                    &gt;
                  &lt;/button&gt;
                  `,
                })
                export class MyButtonComponent {
                  @Output() buttonClicked = new EventEmitter&lt;string&gt;();
                } 
              </code>
            </pre>
            <aside class="notes">posso emettere anche void</aside>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="13-16">
                import { Component, EventEmitter, Output } from '@angular/core';
                @Component({
                  selector: 'my-button',
                  template: `
                  &lt;button 
                    (click)="buttonClicked.emit("i got clicked!!")"
                    &gt;
                  &lt;/button&gt;
                  `,
                })
                export class MyButtonComponent {
                  @Output() buttonClicked = new EventEmitter&lt;string&gt;();
                  @Output() someOtherEvent = new EventEmitter();
                  constructor() {
                    setTimeout(() => this.someOtherEvent.emit('Hey!'), 3000)   
                  }
                } 
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="3-6,10-16" style="max-height: unset;">
                @Component({
                  template: `
                    &lt;my-button 
                      (buttonClicked)="doSomething($event)"
                      (someOtherEvent)="doSomethingElse($event)"
                    &gt;
                    &lt;/my-button&gt;
                  `,
                })
                export class AppComponent {
                  doSomething(e) {
                    console.log(e) // 'i got clicked!!'
                  }
                  doSomethingElse(e) {
                    e.split('') // ['H', 'e', 'y', '!']
                  }
                }
              </code>
            </pre>
            <aside class="notes">posso emettere anche void</aside>
          </section>
          <section>
            <h2>lifecycle hooks</h2>
            <div class="r-stack">
              <img
                width="400"
                src="https://codecraft.tv/courses/angular/components/lifecycle-hooks/images/lifecycle-hooks.png"
                alt=""
              />
              <img
                class="fragment"
                width="400"
                src="./img/lifecycle-hooks-unfocused.png"
                alt=""
              />
            </div>
          </section>
          <section>
            <h4>constructor - quando il componente viene instanziato</h4>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="8-10" style="max-height: unset;">
                @Component({
                  template: `
                    &lt;my-title title="My App!"&gt;&lt;/my-title&gt;
                    &lt;my-button&gt;&lt;/my-button&gt;
                  `,
                })
                export class MyPageComponent {
                  constructor() {
                    console.log('MyPageComponent instance created!')
                  }
                }
              </code>
            </pre>
          </section>
          <section>
            <p style="font-size: 5rem">ngOnChanges</p>
            <p>quando gli input cambiano valore</p>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers style="max-height: unset;">
                @Component({
                  template: `
                    &lt;my-title [title]="pageTitle"&gt;&lt;/my-title&gt;
                    &lt;my-button (buttonClicked)="pageTitle = 'New Value!'"&gt;&lt;/my-button&gt;
                  `,
                })
                export class MyPageComponent {
                  pageTitle = 'My App!';
                }
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                import { OnChanges, SimpleChanges } from '@angular/core';
                @Component({
                  selector: 'my-title',
                  template: '&lt;h1&gt;{{ title }}&lt;/h1&gt;',
                })
                export class MyTitleComponent implements OnChanges {
                  @Input() title = 'Default title';

                  ngOnChanges(changes: SimpleChanges) {
                    console.log(changes)  
                  }
                } 
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                // Simple Changes - 1
                {
                  title: {
                    previousValue: undefined
                    currentValue: "My App!"
                    firstChange: true
                  }
                }
                // Simple Changes - 2
                {
                  title: {
                    previousValue: "My App!"
                    currentValue: "New Value!"
                    firstChange: false
                  }
                }
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                @Component({
                  selector: 'my-title',
                  template: '&lt;h1&gt;{{ _title }}&lt;/h1&gt;',
                })
                export class MyTitleComponent {
                  _title = 'Default title';
                  @Input() set title(v: string) {
                    this._title = v;
                    console.log('New input set!')
                  };
                } 
              </code>
            </pre>
          </section>
          <section>
            <p>ngOnInit - dopo il setting dei primi input</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                import { OnInit } from '@angular/core';
                @Component({
                  selector: 'my-title',
                  template: '&lt;h1&gt;My Title&lt;/h1&gt;',
                })
                export class MyTitleComponent implements OnInit {
                  ngOnInit() {
                    console.log('some initial logic on the state...')
                  }
                } 
              </code>
            </pre>
          </section>
          <section>
            <p>ngOnDestroy - quando il componente viene rimosso dal DOM</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                import { OnDestroy } from '@angular/core';
                @Component({
                  selector: 'my-title',
                  template: '&lt;h1&gt;My Title&lt;/h1&gt;',
                })
                export class MyTitleComponent implements OnDestroy {
                  ngOnDestroy() {
                    console.log('some cleanup logic...')
                  }
                } 
              </code>
            </pre>
          </section>
          <section><h2>Content projection</h2></section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="4-6">
                @Component({
                  selector: 'centered-layout',
                  template: `
                    &lt;div style="display: flex; justify-content: 'center'"&gt;
                      &lt;ng-content&gt;&lt;/ng-content&gt;
                    &lt;/div&gt;
                  `,
                })
                export class CenteredLayoutComponent {} 
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                @Component({
                  template: `
                    &lt;centered-layout&gt;
                      &lt;div&gt;Item 1&lt;/div&gt;
                      &lt;div&gt;Item 2&lt;/div&gt;
                    &lt;/centered-layout&gt;
                  `,
                })
                export class AppComponent { } 
              </code>
            </pre>
          </section>
          <section>
            <h4>standalone mode (v14+)</h4>
            <pre class="language-javascript">
              <code data-trim data-line-numbers style="max-width: unset;">
                @Component({
                  standalone: true,
                  imports: [
                    MyTitleComponent, 
                    MyButtonComponent, 
                    CommonModule
                  ],
                  template: `
                    &lt;my-title title="My Page"&gt;&lt;/my-title&gt;
                    &lt;my-button&gt;&lt;/my-button&gt;
                  `,
                })
                export class MyPageComponent { } 
              </code>
            </pre>
            <aside class="notes">
              in questo esempio assumiamo che tutti i componenti sono standalone
            </aside>
          </section>
        </section>

        <section>
          <section>
            <h1>Pipes</h1>
            <aside class="notes">Funzionalità reperibili sul template</aside>
          </section>
          <section>
            <p>ng g p reverse</p>
            <ul>
              <li>reverse.pipe.ts</li>
              <li>reverse.pipe.spec.ts</li>
            </ul>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                import { Pipe, PipeTransform } from '@angular/core';

                @Pipe({ name: 'reverse' })
                export class ReversePipe implements PipeTransform { 

                  transform(value: string) {
                    return value.split('').reverse().join('');
                  }

                } 
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="3">
                @Component({ 
                  template: `
                    &lt;div&gt;{{ '!dlrow ,olleH' | reverse }}&lt;/div&gt;
                  `
                })
                export class AppComponent { } 
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="3">
                @Component({ 
                  template: `
                    &lt;div&gt;{{ '!dlrow ,olleH' | reverse | uppercase | slice:0:4 }}&lt;/div&gt;
                  `
                })
                export class AppComponent { } 
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                @Pipe({ name: 'slice' })
                export class SlicePipe implements PipeTransform { 

                  transform(value: string, start: number, end: number) {
                    return value.slice(start, end);
                  }

                } 
              </code>
            </pre>
          </section>
          <section><h2>funzioni pure</h2></section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1">
                @Pipe({ name: 'slice', pure: false })
                export class SlicePipe implements PipeTransform { 

                  transform(value: string, start: number, end: number) {
                    return value.slice(start, end);
                  }

                } 
              </code>
            </pre>
          </section>
        </section>

        <section>
          <section><h1>Directives</h1></section>
          <section>
            <h2>un componente...senza template</h2>
            <aside class="notes">
              In realtà Component decorator è una sottoclasse di Directive
            </aside>
          </section>
          <section>
            <p>ng g d log-user-input</p>
            <ul>
              <li>log-user-input.directive.ts</li>
              <li>log-user-input.directive.spec.ts</li>
            </ul>
          </section>
          <section data-auto-animate>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1|4-7">
                @Directive({ selector: 'input[logUserInput]' })
                export class LogUserInputDirective { 

                  @HostListener('keydown', ['$event'])
                  onKeyDown(e: KeyboardEvent) {
                    console.log('User has pressed key: ', e.key)
                  }
                } 
              </code>
            </pre>
          </section>
          <section data-auto-animate>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                @Directive({ selector: 'input[logUserInput]' })
                export class LogUserInputDirective { 

                  @HostListener('keydown', ['$event'])
                  onKeyDown(e: KeyboardEvent) {
                    console.log('User has pressed key: ', e.key)
                  }
                } 
              </code>
            </pre>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                @Component({ template: '&lt;input logUserInput&gt;' })
                export class AppComponent { } 
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1|4-7">
                @Directive({ selector: 'button' })
                export class UserNotAllowedDirective { 
                  user = { ... }
                  @HostBinding('disabled')
                  get userNotAllowed() {
                    return !this.user.canDoStuff
                  }
                } 
              </code>
            </pre>
            <aside class="notes">
              le direttive supportano tutto ciò che supportano i componenti.
              Input Output, lifecycle methods, etc.
            </aside>
          </section>
          <section><h2>Direttive strutturali</h2></section>
          <section>
            <p>*ngIf</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="2|2,6-10">
                @Component({ template: `
                  &lt;button *ngIf="buttonIsVisible"&gt;
                    Click me if you can
                  &lt;/button&gt;
                ` })
                export class AppComponent { 
                  buttonIsVisible = true;
                  constructor() {
                    setTimeout(() => this.buttonIsVisible = false, 10000)
                  }
                } 
              </code>
            </pre>
          </section>
          <section>
            <p>*ngIf - else</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="2|2,6-10">
                @Component({ template: `
                  &lt;button *ngIf="buttonIsVisible; else buttonIsDisappeared"&gt;
                    Click me if you can
                  &lt;/button&gt;
                  &lt;ng-template #buttonIsDisappeared&gt;
                    &lt;p&gt;Sorry...you missed your chance&lt;/p&gt;
                  &lt;/ng-template&gt;
                ` })
                export class AppComponent { 
                  buttonIsVisible = true;
                  constructor() {
                    setTimeout(() => this.buttonIsVisible = false, 10000)
                  }
                } 
              </code>
            </pre>
          </section>
          <section>
            <p>*ngFor</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="3,9|1-20">
                @Component({ template: `
                  &lt;ul&gt;
                    &lt;li *ngFor="let user of listOfUsers"&gt;
                      {{ user.name }} {{ user.surname }}
                    &lt;/li&gt;
                  &lt;/ul&gt;
                ` })
                export class AppComponent { 
                  listOfUsers = [{...},{...},{...}];
                } 
              </code>
            </pre>
          </section>
          <section>
            <p>*ngFor - more info...</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="3,9|1-20">
                @Component({ template: `
                  &lt;ul&gt;
                    &lt;li *ngFor="let user of listOfUsers; let i = index;"&gt;
                      {{ user.name }} {{ user.surname }}
                    &lt;/li&gt;
                  &lt;/ul&gt;
                ` })
                export class AppComponent { 
                  listOfUsers = [{...},{...},{...}];
                } 
              </code>
            </pre>
            <aside class="notes">menziona altri dati reperibili</aside>
          </section>
        </section>

        <section>
          <section>
            <h1>quiz time!</h1>
          </section>
          <section>
            <p class="fragment">Come si crea un componente? Come si usa?</p>
            <p class="fragment">Cos'è un pipe? Come si usa?</p>
            <p class="fragment">Cos'è una direttiva? Come si usa?</p>
          </section>

          <section>
            <p class="fragment">
              Come si fa a passare dati da un componente padre a un componente
              figlio?
            </p>
            <p class="fragment">
              E da un componente figlio a un componente padre?
            </p>
            <p class="fragment">A cosa serve ngOnChanges?</p>
            <p class="fragment">A cosa serve ngOnInit?</p>
            <p class="fragment">A cosa serve ngOnDestroy?</p>
            <p class="fragment">Come funziona la content projection?</p>
          </section>

          <section>
            <p class="fragment">
              Come si fa ad aggiungere o rimuovere un componente/elemento html
              sulla base di una condizione?
            </p>
            <p class="fragment">
              Come si fa a generare, a partire da una lista di dati, una lista
              di componenti/elementi html?
            </p>
          </section>
        </section>

        <section>
          <section>
            <h1>Services</h1>
            <aside class="notes">
              Classe richiedibile dagli elementi angular.
            </aside>
          </section>
          <section>
            <p>ng g s user</p>
            <ul>
              <li>user.service.ts</li>
              <li>user.service.spec.ts</li>
            </ul>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                @Injectable({ providedIn: 'root' })
                export class UserService { } 
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                @Injectable({ providedIn: 'root' })
                export class UserService {
                  private loggedUser = {..., name: 'Gianluca' } 
                  isLoggedIn = true;
                  canDoStuff = false;

                  getUserName() {
                    return this.loggedUser.name
                  }

                  isAdmin() {
                    ...
                  }
                } 
              </code>
            </pre>
            <aside class="notes">lo riempiamo di logica...</aside>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-30|16">
                import { UserService } from 'user.service';

                @Component({ template: `
                  &lt;p *ngIf="isAdmin; else commonUser"&gt;
                    Dear {{ userName }}, you have access to a lot of stuff!
                  &lt;/p&gt;
                  &lt;ng-template #commonUser&gt;
                  Dear {{ userName }}, you can do less than you think...
                  &lt;/ng-template&gt;
                  ` 
                })
                export class MyPageComponent {
                  userName = this.userService.getUserName();
                  isAdmin = this.userService.isAdmin();

                  constructor(private userService: UserService) { }
                  
                } 
              </code>
            </pre>
            <aside class="notes">
              inciso...ricorda: dichiarare accessor in constructor su ts
            </aside>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                @Component({ template: `
                  &lt;p *ngIf="userService.isLoggedIn; else loginForm"&gt;
                    Welcome {{ userService.getUserName() }}!
                  &lt;/p&gt;
                  &lt;ng-template #loginForm&gt;
                    &lt;form&gt;
                      &lt;input name="username"&gt;
                      &lt;input name="password" type="password"&gt;
                    &lt;/form&gt;
                  &lt;/ng-template&gt;
                  ` 
                })
                export class HomeComponent {
                  
                  constructor(public userService: UserService) { }
                  
                } 
              </code>
            </pre>
            <aside class="notes">
              inciso...ricorda: dichiarare accessor in constructor su ts
            </aside>
          </section>
          <section>
            <h2>Come arriva questo oggetto nel vostro componente?</h2>
          </section>
        </section>

        <section>
          <section>
            <h1>Dependency Injection</h1>
            <aside class="notes">
              Ci sono due modi per reperire dati in un componente in angular.
              Inputs e DI.
            </aside>
          </section>
          <section>
            <h4>Accedere ai dati semplicemente richiedendoli</h4>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                @Component({ template: `
                  &lt;p *ngIf="userService.isLoggedIn; else loginForm"&gt;
                    Welcome {{ userService.getUserName() }}!
                  &lt;/p&gt;
                  ` 
                })
                export class HomePageComponent {
                  
                  constructor(public userService: UserService) { }
                  
                } 
              </code>
            </pre>
          </section>
          <section>
            <h2>v14+</h2>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                @Component({ template: `
                  &lt;p *ngIf="userService.isLoggedIn"&gt;
                    Welcome {{ userService.getUserName() }}!
                  &lt;/p&gt;
                  ` 
                })
                export class HomePageComponent {
                  userService = inject(UserService);
                } 
              </code>
            </pre>
          </section>
          <section>
            <h2>Da dove vengono questi dati?</h2>
            <ul>
              <li>module providers</li>
              <li>element providers</li>
            </ul>
          </section>
          <section>
            <h4>module providers</h4>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                @NgModule({
                  declarations: [
                    MyPageComponent,
                    HomePageComponent,
                    ReversePipe
                  ],
                  providers: [
                    UserService
                  ]
                  ...
                })
                export class SomeModule {} 
              </code>
            </pre>
            <aside class="notes">
              Stessa istanza del service per questo modulo!
            </aside>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                @NgModule({
                  declarations: [
                    OtherPageComponent
                  ],
                  providers: [
                    UserService
                  ]
                  ...
                })
                export class SomeOtherModule {} 
              </code>
            </pre>
            <aside class="notes">Altra istanza del service</aside>
          </section>
          <section>
            <h2>i providers di un modulo vengono esportati</h2>
          </section>
          <section>
            <h2>element providers</h2>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                @Component({
                  providers: [UserService],
                  template: `
                    &lt;p *ngIf="userService.isLoggedIn; else loginForm"&gt;
                      Welcome {{ userService.getUserName() }}!
                    &lt;/p&gt;
                  ` 
                })
                export class HomePageComponent {
                  
                  constructor(public userService: UserService) { }
                  
                }
              </code>
            </pre>
            <aside class="notes">
              prop providers per Components e Directives. Lo user service sara'
              disponibile per il componente
            </aside>
          </section>

          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                @Component({
                  providers: [UserService],
                  template: `
                    &lt;my-title&gt;&lt;/my-title&gt;
                  ` 
                })
                export class HomePageComponent { }
              </code>
            </pre>
          </section>

          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                import { UserService } from 'user.service';

                @Component({
                  selector: 'my-title',
                  template: `
                      &lt;h1&gt;Welcome {{ userName }}!&lt;/h1&gt;
                  `,
                })
                export class MyTitleComponent {
                  userName = inject(UserService).getUserName()
                } 
              </code>
            </pre>
          </section>

          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1">
                @Injectable({ providedIn: 'root' })
                export class UserService {
                  ...
                } 
              </code>
            </pre>
            <pre class="fragment language-javascript">
              <code data-trim data-line-numbers>
                @NgModule({ 
                  ...
                  providers: [UserService]
                  ...
                })
                export class AppModule { } 
              </code>
            </pre>
          </section>

          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1">
                @Injectable()
                export class UserService {
                  ...
                } 
              </code>
            </pre>
          </section>

          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1">
                @Injectable({ providedIn: 'platform' })
                export class UserService {
                  ...
                } 
              </code>
            </pre>
            <aside class="notes">significa booooh??</aside>
          </section>

          <section>
            <div class="r-stack">
              <pre class="language-javascript">
                <code data-trim data-line-numbers="1">
                  @Injectable({ providedIn: 'any' })
                  export class UserService {
                    ...
                  } 
                </code>
              </pre>
              <h2 class="fragment">deprecated!</h2>
            </div>
            <aside class="notes">significa ogni modulo del mio progetto</aside>
          </section>

          <section>
            <h2>configurare i providers</h2>
            <div style="display: flex; justify-content: space-around">
              <div>
                <h3 class="fragment">provide</h3>
                <ul class="fragment">
                  <li>class</li>
                  <li>injection tokens</li>
                </ul>
              </div>
              <div>
                <h3 class="fragment">use</h3>
                <ul class="fragment">
                  <li>class</li>
                  <li>value</li>
                  <li>existing</li>
                  <li>factory</li>
                </ul>
              </div>
            </div>
          </section>

          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                @NgModule({
                  ...
                  providers: [
                    UserService
                  ]
                  ...
                })
                export class SomeModule {} 
              </code>
            </pre>
          </section>
          <section>Rappresentazione dell'albero delle dipendenze</section>
          <section>
            <p>useClass</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                @NgModule({
                  ...
                  providers: [
                    {
                      provide: UserService,
                      useClass: UserService
                    }
                  ]
                  ...
                })
                export class SomeModule {} 
              </code>
            </pre>
          </section>
          <section>
            <p>useValue</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                @NgModule({
                  ...
                  providers: [
                    {
                      provide: UserService,
                      useValue: 'Hello!'
                    }
                  ]
                  ...
                })
                export class SomeModule {} 
              </code>
            </pre>
          </section>
          <section>Modificatori della richiesta delle dipendenze</section>
          <section>
            <p>useExisting</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                @NgModule({
                  ...
                  providers: [
                    {
                      provide: UserService,
                      useExisting: AnotherService
                    }
                  ]
                  ...
                })
                export class SomeModule {} 
              </code>
            </pre>
          </section>

          <section>
            <p>useFactory</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                function userFactory() {
                  if(Math.random() >0.5) {
                    return new UserService()
                  } else {
                    return new AnotherService()
                  }
                }

                @NgModule({
                  ...
                  providers: [
                    {
                      provide: UserService,
                      useFactory: userFactory
                    }
                  ]
                  ...
                })
                export class SomeModule {} 
              </code>
            </pre>
          </section>

          <section><h2>stesso token, più providers</h2></section>

          <section>
            <h2>Chi crea gli oggetti?</h2>
            <h2 class="fragment">Injector</h2>
          </section>

          <section>
            <img src="./img/DI-tree.jpg" />
          </section>

          <section>
            <h4>
              Cosa succede se provi a richiedere qualcosa che non è nell'albero
              delle dipendenze?
            </h4>
            <h2 class="fragment">Null Injector Error</h2>
          </section>

          <section>
            <h2>quiz time!</h2>
          </section>

          <section>
            <p class="fragment">Cosa fa @Injectable({ providedIn: 'root' })?</p>
            <p class="fragment">
              Come si ottengono le istanze dei service ad es. in un componente?
            </p>
            <p class="fragment">Cos'è l'injector?</p>
            <p class="fragment">Cosa sono i providers?</p>
            <p class="fragment">Cos'è un service?</p>
          </section>
        </section>

        <section data-visibility="hidden">
          <section>
            <h2>D.I Bonus</h2>
          </section>

          <section>injection tokens</section>
          <section>Modificatori della richiesta delle dipendenze</section>
        </section>

        <section>
          <section>
            <h2>HTTP e RXJS</h2>
            <img
              width="300"
              src="https://rxjs.dev/generated/images/marketing/home/Rx_Logo-512-512.png"
              alt=""
            />
          </section>
          <section><img src="./img/promises-observables.jpg" /></section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                import { HttpClientModule } from '@angular/common/http';
                @NgModule({
                  ...,
                  imports: [
                    HttpClientModule
                  ]
                  ...
                })
                export class AppModule {} 
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|11|10,13-18|6" style="max-height: unset;">
                import { HttpClient } from '@angular/common/http';

                @Component({
                  selector: 'my-title',
                  template: `
                      &lt;h1 *ngIf="user"&gt;Welcome {{ user.name }}!&lt;/h1&gt;
                  `,
                })
                export class MyTitleComponent implements OnInit {
                  user: User | null = null;
                  constructor(private httpClient: HttpClient) {}

                  ngOnInit() {
                    this.httpClient.get&lt;User&gt;('myApi.com/users/1')
                      .subscribe((user) => {
                        this.user = user;
                      })
                  }
                } 
              </code>
            </pre>
            <aside class="notes">
              mentre fetch restituisce una promise, i metodi dell'http client di
              angular restituiscono un observable. Observable = fonte di dati,
              asincrona, che potrebbero arrivare in qualsiasi momento. Subscribe
              significa "fornisci i dati da questa fonte a questa funzione che
              passo". La funzione viene chiamata observer.
            </aside>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|12-14|6-8">
                import { HttpClient } from '@angular/common/http';

                @Component({
                  selector: 'my-title',
                  template: `
                      &lt;h1 *ngIf="user$ | async as user"&gt;
                        Welcome {{ user.name }}!
                      &lt;/h1&gt;
                  `,
                })
                export class MyTitleComponent {
                  user$: Observable&lt;User&gt; = 
                    this.httpClient.get('myApi.com/users/1');
                  constructor(private httpClient: HttpClient) {}
                } 
              </code>
            </pre>
            <aside class="notes">
              async pipe fa in modo che questi dati arrivino direttamente al
              template, senza passare da un campo del template. il $ è una
              convenzione.
            </aside>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|13-19" style="max-height: unset;">
                import { HttpClient } from '@angular/common/http';

                @Component({
                  selector: 'my-title',
                  template: `
                      &lt;h1 *ngIf="user"&gt;Welcome {{ user.name }}!&lt;/h1&gt;
                  `,
                })
                export class MyTitleComponent implements OnInit {
                  user: User | null = null;
                  constructor(private httpClient: HttpClient) {}

                  ngOnInit() {
                    this.httpClient.get('myApi.com/users/1')
                      .toPromise()
                      .then((user) => {
                        this.user = user;
                      })
                  }
                } 
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|12-13|6-8" style="max-height: unset;">
                import { HttpClient } from '@angular/common/http';

                @Component({
                  selector: 'my-title',
                  template: `
                      &lt;h1 *ngIf="user$ | async as user"&gt;
                        Welcome {{ user.name }}!
                      &lt;/h1&gt;
                  `,
                })
                export class MyTitleComponent {
                  user$: Promise&lt;User&gt; = 
                    this.httpClient.get('myApi.com/users/1').toPromise();
                  constructor(private httpClient: HttpClient) {}
                } 
              </code>
            </pre>
          </section>
          <section>
            <h4>http options</h4>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="14-16" style="max-height: unset;">
                import { HttpClient } from '@angular/common/http';

                @Component({
                  selector: 'my-title',
                  template: `
                      &lt;h1 *ngIf="user"&gt;Welcome {{ user.name }}!&lt;/h1&gt;
                  `,
                })
                export class MyTitleComponent implements OnInit {
                  user: User | null = null;
                  constructor(private httpClient: HttpClient) {}

                  ngOnInit() {
                    this.httpClient.get&lt;User&gt;('myApi.com/users/1', {
                      ...
                    })
                      .subscribe((user) => {
                        this.user = user;
                      })
                  }
                } 
              </code>
            </pre>
          </section>
          <section>
            <h4>Gestire errori</h4>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|13-23">
                @Component({
                  selector: 'my-title',
                  template: `
                      &lt;h1 *ngIf="user$ | async as user"&gt;
                        Welcome {{ user.name }}!
                      &lt;/h1&gt;
                  `,
                })
                export class MyTitleComponent implements OnInit {
                  user: User | null = null;
                  constructor(private httpClient: HttpClient) {}

                  ngOnInit() {
                    this.httpClient.get&lt;User&gt;('myApi.com/users/1')
                      .subscribe(
                        (user) => {
                          this.user = user;
                        },
                        (error) => {
                          console.error('Something bad happened')
                        }
                      )
                  }
                } 
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|14-22">
                @Component({
                  selector: 'my-title',
                  template: `
                      &lt;h1 *ngIf="user$ | async as user"&gt;
                        Welcome {{ user.name }}!
                      &lt;/h1&gt;
                  `,
                })
                export class MyTitleComponent implements OnInit {
                  user: User | null = null;
                  constructor(private httpClient: HttpClient) {}

                  ngOnInit() {
                    this.httpClient.get&lt;User&gt;('myApi.com/users/1')
                      .subscribe({
                        next: (user) => {
                          this.user = user;
                        },
                        error: (error) => {
                          console.error('Something bad happened')
                        },
                      })
                  }
                } 
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers style="max-height: unset;">
                @Injectable({ providedIn: 'root' })
                export class UserService {
                  private readonly userEndpoint = 'myApi.com/users';
                  constructor(private httpClient: HttpClient) {}

                  getAllUsers() {
                    return this.httpClient.get&lt;User[]&gt;(this.userEndpoint)
                  }

                  getUserById(id: string) {
                    return this.httpClient.get&lt;User&gt;(`${this.userEndpoint}/id`)
                  }
                  
                  addUser(user: User) {
                    return this.httpClient.post&lt;string&gt;(this.userEndpoint, user);
                  }

                  removeUserById(id: string) {
                    return this.httpClient.delete(`${this.userEndpoint}/id`);
                  }

                  updateUser(user: User) {
                    return this.httpClient.put&lt;User&gt;(this.userEndpoint, user);
                  }
                } 
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers style="max-height: unset;">
                @Component({
                  selector: 'my-title',
                  template: `
                      &lt;h1 *ngIf="user$ | async as user"&gt;
                        Welcome {{ user.name }}!
                      &lt;/h1&gt;
                  `,
                })
                export class MyTitleComponent implements OnInit {
                  user$ = this.userService.getUserById('1');
                  constructor(private userService: UserService) {}
                } 
              </code>
            </pre>
          </section>
          <section>
            <h2>DEMO TIME</h2>
          </section>
          <section>
            <h3>Promises vs Observables</h3>
            <table>
              <thead>
                <tr>
                  <th>Promises</th>
                  <th>Observables</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Eager</td>
                  <td>Lazy</td>
                </tr>
                <tr>
                  <td>Emette un solo valore</td>
                  <td>Può emettere più valori</td>
                </tr>
                <tr>
                  <td>-</td>
                  <td>Operatori</td>
                </tr>
                <tr>
                  <td>Non cancellabile</td>
                  <td>Cancellabile</td>
                </tr>
                <tr>
                  <td>minore complessità</td>
                  <td>maggiore complessità</td>
                </tr>
              </tbody>
            </table>
          </section>
          <section>
            <h2>pipe</h2>
            <img
              src="https://hazelcast.com/wp-content/uploads/2021/12/24_DataPipleline-1.png"
            />
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="10-12" style="max-height: unset;">
                @Component({
                  selector: 'my-title',
                  template: `
                      &lt;h1 *ngIf="userName$ | async as userName"&gt;
                        Welcome {{ userName }}!
                      &lt;/h1&gt;
                  `,
                })
                export class MyTitleComponent {
                  userName$ = this.userService.getUserById('1').pipe(

                  );
                  constructor(private userService: UserService) {}
                } 
              </code>
            </pre>
          </section>
          <section>
            <h4 class="fragment">pipe operators</h4>
            <ul>
              <li class="fragment">map</li>
              <li class="fragment">filter</li>
              <li class="fragment">switchMap</li>
              <li class="fragment">catchError</li>
            </ul>
            <h4 class="fragment">observable creator</h4>
            <ul>
              <li class="fragment">of</li>
            </ul>
          </section>
          <section>
            <p>map</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|1|13|12|13|6" style="max-height: unset;">
                import { map } from 'rxjs/operators';

                @Component({
                  selector: 'my-title',
                  template: `
                      &lt;h1 *ngIf="userName$ | async as userName"&gt;
                        Welcome {{ userName }}!
                      &lt;/h1&gt;
                  `,
                })
                export class MyTitleComponent {
                  userName$ = this.userService.getUserById('1').pipe(
                    map((user) => user.name)
                  );
                  constructor(private userService: UserService) {}
                } 
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="12-16" style="max-height: unset;">
                import { map } from 'rxjs/operators';

                @Component({
                  selector: 'my-title',
                  template: `
                      &lt;h1 *ngIf="userName$ | async as userName"&gt;
                        Welcome {{ userName }}!
                      &lt;/h1&gt;
                  `,
                })
                export class MyTitleComponent {
                  userName$ = this.userService.getUserById('1').pipe(
                    map(user => user.name),
                    map(name => name.toUpperCase())
                  );
                  constructor(private userService: UserService) {}
                } 
              </code>
            </pre>
          </section>
          <section>
            <p>filter</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|1|12-13|14|15|6" style="max-height: unset;">
                import { map, filter } from 'rxjs/operators';

                @Component({
                  selector: 'my-title',
                  template: `
                      &lt;h1 *ngIf="userNameNoMario$ | async as userNameNoMario"&gt;
                        Welcome {{ userNameNoMario }}!
                      &lt;/h1&gt;
                  `,
                })
                export class MyTitleComponent {
                  userNameNoMario$ = this.userService.getUserById('1')
                    .pipe(
                      map(user => user.name),
                      filter(name => name !== 'Mario')
                    );
                  constructor(private userService: UserService) {}
                } 
              </code>
            </pre>
          </section>
          <section>
            <h3>
              mostrare tutti i post scritti dal primo utente che si chiama Mario
            </h3>
            <ul>
              <li>GET /users</li>
              <li>GET /posts</li>
            </ul>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|11,18-25|18,19|20|21,22|23,11|4-7|18-25">
                @Component({
                  selector: 'mario-posts',
                  template: `
                      &lt;user-post 
                        *ngFor="let post of marioPosts"
                        [data]="post"
                      &gt;&lt;/user-post&gt;
                  `,
                })
                export class MarioPostsComponent implements OnInit {
                  marioPosts: Post[] = [];
                  constructor(
                    private userService: UserService, 
                    private postService: PostService
                  ) {}

                  ngOnInit() {
                    this.userService.getUsers()
                      .subscribe(users => {
                        const mario = users.find(u => u.name === 'Mario')
                        this.userService.getPostsByUserId(mario.id)
                          .subscribe((posts) => {
                            this.marioPosts = posts
                          })
                      })
                  }
                } 
              </code>
            </pre>
          </section>
          <section>
            <p>switchMap</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|1|13,20,23-25|21|22|23-25|6-9">
                import { map, filter, switchMap } from 'rxjs/operators';

                @Component({
                  selector: 'mario-posts',
                  template: `
                      &lt;user-post 
                        *ngFor="let post of marioPosts"
                        [data]="post"
                      &gt;&lt;/user-post&gt;
                  `,
                })
                export class MarioPostsComponent {
                  marioPosts: Post[] = [];
                  constructor(
                    private userService: UserService, 
                    private postService: PostService
                  ) {}

                  ngOnInit() {
                    this.userService.getUsers().pipe(
                      map(users => users.find(u => u.name === 'Mario')),
                      switchMap(mario => this.postService.getPostsByUserId(mario.id))
                    ).subscribe((posts) => {
                      this.marioPosts = posts;
                    });
                  }
                } 
              </code>
            </pre>
            <aside class="notes">
              switchMap => sostituisci la fonte che stai osservando con una
              nuova fonte. Notare che io sto dando per scontato che avrò un
              mario in lista
            </aside>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|13-16|6-9|7">
                import { map, filter, switchMap } from 'rxjs/operators';

                @Component({
                  selector: 'mario-posts',
                  template: `
                      &lt;user-post 
                        *ngFor="let post of (marioPosts$ | async) || []"
                        [data]="post"
                      &gt;&lt;/user-post&gt;
                  `,
                })
                export class MarioPostsComponent {
                  marioPosts$ = this.userService.getUsers().pipe(
                    map(users => users.find(u => u.name === 'Mario')),
                    switchMap(mario => this.postService.getPostsByUserId(mario.id))
                  );
                  constructor(
                    private userService: UserService, 
                    private postService: PostService
                  ) {}

                  
                } 
              </code>
            </pre>
          </section>
          <section>
            <p>catchError - of</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|1|2|14-21|17-20">
                import { map, filter, switchMap, catchError } from 'rxjs/operators';
                import { of } from 'rxjs';

                @Component({
                  selector: 'mario-posts',
                  template: `
                      &lt;user-post 
                        *ngFor="let post of (marioPosts$ | async) || []"
                        [data]="post"
                      &gt;&lt;/user-post&gt;
                  `,
                })
                export class MarioPostsComponent {
                  marioPosts$ = this.userService.getUsers().pipe(
                    map(users => users.find(u => u.name === 'Mario')),
                    switchMap(mario => this.postService.getPostsByUserId(mario.id)),
                    catchError(error => {
                      console.error('Something bad happened: ', error);
                      return of([])
                    })
                  );
                  constructor(
                    private userService: UserService, 
                    private postService: PostService
                  ) {}
                } 
              </code>
            </pre>
          </section>
          <section>
            <h2>
              <a href="https://www.openapis.org/" target="_blank"
                >Open API / swagger</a
              >
            </h2>
          </section>
          <section>
            <h2>Observer pattern</h2>
            <aside class="notes">
              una fonte di cui possiamo osservare i cambiamenti codificati sotto
              forma di eventi
            </aside>
          </section>
        </section>

        <section>
          <section><h1>forms</h1></section>
          <section><h3>gestire diversi livelli di complessità</h3></section>
          <section>
            <p>Livello 0</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|6|12-15|11">
                @Component({
                  selector: 'simple-form',
                  template: `
                      &lt;input
                        name="username"
                        (input)="handleUsername($event)"
                      &gt;
                  `,
                })
                export class SimpleFormComponent {
                  username = '';
                  handleUsername(e: Event) {
                    const input = e.target as HTMLInputElement;
                    this.username = input.value;
                  }
                } 
              </code>
            </pre>
            <aside class="notes">name non obbligatorio</aside>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|12|6|7|13-16|12|6">
                @Component({
                  selector: 'simple-form',
                  template: `
                      &lt;input
                        name="username"
                        [value]="username"
                        (input)="handleUsername($event)"
                      &gt;
                  `,
                })
                export class SimpleFormComponent {
                  username = 'Nicola';
                  handleUsername(e: Event) {
                    const input = e.target as HTMLInputElement;
                    this.username = input.value;
                  }
                } 
              </code>
            </pre>
          </section>
          <section>
            <p>validazione</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|8|15-19|13,16-17|14,18|7|11">
                @Component({
                  selector: 'simple-form',
                  template: `
                      &lt;input
                        name="username"
                        [value]="username"
                        [class.has-error]="usernameError"
                        (input)="handleUsername($event)"
                      &gt;
                  `,
                  styles: ['input.has-error { border-color: red }']
                })
                export class SimpleFormComponent {
                  username = 'Nicola';
                  usernameError = false;
                  handleUsername(e: Event) {
                    const input = e.target as HTMLInputElement;
                    this.username = input.value;
                    this.usernameError = !input.value || input.value < 3 || input.value > 30;
                  }
                } 
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|4-9|10-16|20-33">
                @Component({
                  selector: 'simple-login-form',
                  template: `
                      &lt;input
                        name="username"
                        [value]="username"
                        [class.has-error]="usernameError"
                        (input)="handleUsername($event)"
                      &gt;
                      &lt;input
                        name="password"
                        type="password"
                        [value]="password"
                        [class.has-error]="passwordError"
                        (input)="handlePassword($event)"
                      &gt;
                  `,
                })
                export class SimpleLoginFormComponent {
                  username = 'Nicola';
                  password = '';
                  usernameError = false;
                  passwordError = false;
                  handleUsername(e: Event) {
                    const input = (e.target as HTMLInputElement);
                    this.usernameError = !input.value || input.value < 3 || input.value > 30;
                    this.username = input.value;
                  }
                  handlePassword(e: Event) {
                    const input = (e.target as HTMLInputElement);
                    this.passwordError = !input.value || input.value < 8 || input.value > 10;
                    this.password = input.value;
                  }
                } 
              </code>
            </pre>
          </section>
          <section>
            <p>Livello 1</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                import { FormsModule } from '@angular/forms';
                @NgModule({
                  declarations: [
                    ...,
                    SimpleLoginFormComponent
                  ],
                  imports: [
                  ...,
                    FormsModule
                  ],
                  ...
                })
                export class SomeModule {} 
              </code>
            </pre>
          </section>
          <section>
            <p>ngModel</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|6,11|16,17">
                @Component({
                  selector: 'simple-login-form',
                  template: `
                      &lt;input
                        name="username"
                        [(ngModel)]="username"
                      &gt;
                      &lt;input
                        name="password"
                        type="password"
                        [(ngModel)]="password"
                      &gt;
                  `,
                })
                export class SimpleLoginFormComponent {
                  username = 'Nicola';
                  password = '';
                } 
              </code>
            </pre>
          </section>
          <section>
            <p>[()] - two way binding shorthand</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="6,7,12">
                @Component({
                  selector: 'simple-login-form',
                  template: `
                      &lt;input
                        name="username"
                        [ngModel]="username"
                        (ngModelChange)="username = $event"
                      &gt;
                      &lt;input
                        name="password"
                        type="password"
                        [(ngModel)]="password"
                      &gt;
                  `,
                })
                export class SimpleLoginFormComponent {
                  username = 'Nicola';
                  password = '';
                } 
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                import { ReactiveFormsModule } from '@angular/forms';
                @NgModule({
                  declarations: [
                    ...,
                    SimpleLoginFormComponent
                  ],
                  imports: [
                  ...,
                    ReactiveFormsModule
                  ],
                  ...
                })
                export class SomeModule {} 
              </code>
            </pre>
          </section>
          <section>
            <p>formControl</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|1|8,13|18,19">
                import { FormControl } from '@angular/forms'

                @Component({
                  selector: 'simple-login-form',
                  template: `
                      &lt;input
                        name="username"
                        [formControl]="usernameControl"
                      &gt;
                      &lt;input
                        name="password"
                        type="password"
                        [formControl]="passwordControl"
                      &gt;
                  `,
                })
                export class SimpleLoginFormComponent {
                  usernameControl = new FormControl('Nicola');
                  passwordControl = new FormControl('');
                } 
              </code>
            </pre>
          </section>
          <section>
            <p>typed formControl - v14+</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="18,19">
                import { FormControl } from '@angular/forms'

                @Component({
                  selector: 'simple-login-form',
                  template: `
                      &lt;input
                        name="username"
                        [formControl]="usernameControl"
                      &gt;
                      &lt;input
                        name="password"
                        type="password"
                        [formControl]="passwordControl"
                      &gt;
                  `,
                })
                export class SimpleLoginFormComponent {
                  usernameControl = new FormControl&lt;string&gt;('Nicola');
                  passwordControl = new FormControl&lt;string&gt;('');
                } 
              </code>
            </pre>
          </section>
          <section>
            <h3>
              template-driven forms (ngModel) <br />vs<br />
              reactive forms (formControl)
            </h3>
          </section>
          <section>
            <p>Disabilitare un input</p>
            <p style="font-size: 1.5rem">template-driven forms</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|7">
                @Component({
                  selector: 'simple-login-form',
                  template: `
                      &lt;input
                        name="username"
                        [(ngModel)]="username"
                        [disabled]="true"
                      &gt;
                  `,
                })
                export class SimpleLoginFormComponent {
                  username = 'Nicola';
                } 
              </code>
            </pre>
          </section>
          <section>
            <p>Disabilitare un input</p>
            <p style="font-size: 1.5rem">reactive forms</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|11-14">
                @Component({
                  selector: 'simple-login-form',
                  template: `
                      &lt;input
                        name="username"
                        [formControl]="usernameControl"
                      &gt;
                  `,
                })
                export class SimpleLoginFormComponent {
                  usernameControl = new FormControl({ 
                    value: 'Nicola', 
                    disabled: true 
                  });
                } 
              </code>
            </pre>
            <aside class="notes">
              se provi ad usare disabled funziona ma lancia warning
            </aside>
          </section>
          <section>
            <p>leggere e modificare il valore</p>
            <p style="font-size: 1.5rem">template-driven forms</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|11,13|11,14-16">
                @Component({
                  selector: 'simple-login-form',
                  template: `
                      &lt;input
                        name="username"
                        [(ngModel)]="username"
                      &gt;
                  `,
                })
                export class SimpleLoginFormComponent {
                  username = 'Nicola';
                  constructor() {
                    console.log(this.username);
                    setTimeout(() => {
                      this.username = 'Mario';
                    }, 3000)
                  }
                } 
              </code>
            </pre>
          </section>
          <section>
            <p>leggere e modificare il valore</p>
            <p style="font-size: 1.5rem">reactive forms</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|11,13|11,14-16">
                @Component({
                  selector: 'simple-login-form',
                  template: `
                      &lt;input
                        name="username"
                        [formControl]="usernameControl"
                      &gt;
                  `,
                })
                export class SimpleLoginFormComponent {
                  usernameControl = new FormControl({ value: 'Nicola' });
                  constructor() {
                    console.log(this.usernameControl.value);
                    setTimeout(() => {
                      this.usernameControl.setValue('Mario');
                    }, 3000)
                  }
                } 
              </code>
            </pre>
          </section>
          <section>
            <p>side-effects al cambiamento del valore</p>
            <p style="font-size: 1.5rem">template-driven forms</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|7|13-15">
                @Component({
                  selector: 'simple-login-form',
                  template: `
                      &lt;input
                        name="username"
                        [(ngModel)]="username"
                        (ngModelChange)="logValue($event)"
                      &gt;
                  `,
                })
                export class SimpleLoginFormComponent {
                  username = 'Nicola';
                  logValue(newValue: string) {
                    console.log(newValue);
                  }
                } 
              </code>
            </pre>
          </section>
          <section>
            <p>side-effects al cambiamento del valore</p>
            <p style="font-size: 1.5rem">reactive forms</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|11,13-15">
                @Component({
                  selector: 'simple-login-form',
                  template: `
                      &lt;input
                        name="username"
                        [formControl]="usernameControl"
                      &gt;
                  `,
                })
                export class SimpleLoginFormComponent {
                  usernameControl = new FormControl({ value: 'Nicola' });
                  constructor() {
                    this.usernameControl.valueChanges.subscribe(newValue => {
                      console.log(newValue);
                    })
                  }
                } 
              </code>
            </pre>
          </section>
          <section>
            <p>validazione (con validatori preesistenti)</p>
            <p style="font-size: 1.5rem">template-driven forms</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|7-10">
                @Component({
                  selector: 'simple-login-form',
                  template: `
                      &lt;input
                        name="username"
                        [(ngModel)]="username"
                        [required]="true"
                        [minLength]="3"
                        [maxLength]="30"
                        pattern="[a-zA-Z]"
                      &gt;
                  `,
                })
                export class SimpleLoginFormComponent {
                  username = 'Nicola';
                } 
              </code>
            </pre>
          </section>
          <section>
            <p>validazione (con validatori preesistenti)</p>
            <p style="font-size: 1.5rem">reactive forms</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|1|12-17">
                import { Validators, FormControl } from '@angular/forms'
                @Component({
                  selector: 'simple-login-form',
                  template: `
                      &lt;input
                        name="username"
                        [formControl]="usernameControl"
                      &gt;
                  `,
                })
                export class SimpleLoginFormComponent {
                  usernameControl = new FormControl('Nicola', [
                    Validators.required,
                    Validators.minLength(3),
                    Validators.maxLength(30),
                    Validators.pattern(/[a-zA-Z]/)
                  ]);
                } 
              </code>
            </pre>
          </section>
          <section>
            <p>control status (VALID | INVALID)</p>
            <p style="font-size: 1.5rem">template-driven forms</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|11|15">
                @Component({
                  selector: 'simple-login-form',
                  template: `
                      &lt;input
                        name="username"
                        [(ngModel)]="username"
                        [required]="true"
                        [minLength]="3"
                        [maxLength]="30"
                        pattern="[a-zA-Z]"
                        #usernameControl="ngModel"
                      &gt;
                      &lt;button 
                        (click)="submitUsername()"
                        [disabled]="usernameControl.invalid"
                        &gt;
                        Submit
                      &lt;/button&gt;
                  `,
                })
                export class SimpleLoginFormComponent {
                  username = 'Nicola';
                  submitUsername() {
                    ...
                  }
                } 
              </code>
            </pre>
            <aside class="notes">
              estrarre il formControl nascosto dentro ngModel
            </aside>
          </section>
          <section>
            <p>control status (VALID | INVALID)</p>
            <p style="font-size: 1.5rem">reactive forms</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|9-14|11">
                import { Validators, FormControl } from '@angular/forms'
                @Component({
                  selector: 'simple-login-form',
                  template: `
                      &lt;input
                        name="username"
                        [formControl]="usernameControl"
                      &gt;
                      &lt;button 
                        (click)="submitUsername()"
                        [disabled]="usernameControl.invalid"
                      &gt;
                        Submit
                      &lt;/button&gt;
                  `,
                })
                export class SimpleLoginFormComponent {
                  usernameControl = new FormControl('Nicola', [
                    Validators.required,
                    Validators.minLength(3),
                    Validators.maxLength(30),
                    Validators.pattern(/[a-zA-Z]/)
                  ]);
                  submitUsername() {
                    ...
                  }
                } 
              </code>
            </pre>
          </section>
          <section>
            <h2>
              <a href="https://angular.io/guide/form-validation">Validazione</a>
              e
              <a href="https://angular.io/api/forms/Validators" target="_blank"
                >Validatori</a
              >
            </h2>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                import { AbstractControl, ValidationErrors } from '@angular/forms';

                function required(control: AbstractControl): ValidationErrors | null {
                  if (!control.value) return { required: true }
                  else return null
                }
              </code>
            </pre>
            <aside class="notes">
              ValidationErrors è un alias per un qualsiasi tipo di oggetto
            </aside>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                import { AbstractControl, ValidatorFn } from '@angular/forms';

                function minLength(min: number): ValidatorFn {
                  return function(control: AbstractControl) {
                    if (control.value?.length < min) return {
                      min: min,
                      actual: control.value?.length
                    }
                    else return null;
                  }
                }
              </code>
            </pre>
          </section>
          <section>
            <h3>
              <a
                href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_expressions"
                target="_blank"
                >regular expressions</a
              >
            </h3>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1|1-3|4|4-6">
                const onlyLetters = /^[a-zA-Z]+$/
                console.log(onlyLetters.test('Nicola')) // true
                console.log(onlyLetters.test('N1col4')) // false
                const onlyNumbers = new RegExp('^\d+$')
                console.log(onlyNumbers.test('Nicola')) // false
                console.log(onlyNumbers.test('1234')) // true
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                import { AbstractControl, ValidatorFn } from '@angular/forms';

                function pattern(p: RegExp | string): ValidatorFn {
                  return function(control: AbstractControl) {
                    if (!regExp.test(control.value)) return {
                      requiredPattern: p, 
                      actualValue: control.value
                    }
                    else return null;
                  }
                }
              </code>
            </pre>
          </section>
          <section>
            <p>errori di validazione</p>
            <p style="font-size: 1.5rem">template-driven forms</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|11|11,13-19">
                @Component({
                  selector: 'simple-login-form',
                  template: `
                      &lt;input
                        name="username"
                        [(ngModel)]="username"
                        [required]="true"
                        [minLength]="3"
                        [maxLength]="30"
                        pattern="[a-zA-Z]"
                        #usernameControl="ngModel"
                      &gt;
                      &lt;p *ngIf="usernameControl.hasError('required')"&gt;
                        Si prega di compilare il campo
                      &lt;/p&gt;
                      &lt;p *ngIf="usernameControl.hasError('maxlength')"&gt;
                        Il numero massimo di lettere è 
                        {{ usernameControl.errors.maxlength }}
                      &lt;/p&gt;
                      &lt;button 
                        (click)="submitUsername()"
                        [disabled]="usernameControl.invalid"
                        &gt;
                        Submit
                      &lt;/button&gt;
                  `,
                })
                export class SimpleLoginFormComponent {
                  username = 'Nicola';
                  submitUsername() {
                    ...
                  }
                } 
              </code>
            </pre>
            <aside class="notes">
              estrarre il formControl nascosto dentro ngModel
            </aside>
          </section>
          <section>
            <p>errori di validazione</p>
            <p style="font-size: 1.5rem">reactive forms</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|9-15">
                import { Validators, FormControl } from '@angular/forms'
                @Component({
                  selector: 'simple-login-form',
                  template: `
                      &lt;input
                        name="username"
                        [formControl]="usernameControl"
                      &gt;
                      &lt;p *ngIf="usernameControl.hasError('required')"&gt;
                        Si prega di compilare il campo
                      &lt;/p&gt;
                      &lt;p *ngIf="usernameControl.hasError('maxlength')"&gt;
                        Il numero massimo di lettere è 
                        {{ usernameControl.errors.maxlength }}
                      &lt;/p&gt;
                      &lt;button 
                        (click)="submitUsername()"
                        [disabled]="usernameControl.invalid"
                      &gt;
                        Submit
                      &lt;/button&gt;
                  `,
                })
                export class SimpleLoginFormComponent {
                  usernameControl = new FormControl('Nicola', [
                    Validators.required,
                    Validators.minLength(3),
                    Validators.maxLength(30),
                    Validators.pattern(/[a-zA-Z]/)
                  ]);
                  submitUsername() {
                    ...
                  }
                } 
              </code>
            </pre>
          </section>
          <section>
            <h2>template driven validators</h2>
            <h3>
              <a href="https://angular.io/api/forms/Validator" target="_blank"
                >Validator</a
              >
              interface e
              <a
                href="https://angular.io/api/forms/NG_VALIDATORS"
                target="_blank"
                >NG_VALIDATORS</a
              >
            </h3>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|3|1,4-10|12,13|13-16">
                import { NG_VALIDATORS, Validator } from '@angular/forms';
                @Directive({ 
                  selector: 'input[ngModel][required]',
                  providers: [
                    {
                      provide: NG_VALIDATORS,
                      useExisting: forwardRef(() => RequiredValidator),
                      multi: true
                    }
                  ] 
                })
                export class RequiredValidator implements Validator {
                  validate(control: AbstractControl): ValidationErrors | null {
                    if (!control.value) return { required: true }
                    else return null
                  }                  
                }
              </code>
            </pre>
          </section>
          <section>
            <h2>custom validator</h2>
            <h4>validazione per codice fiscale</h4>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                function codiceFiscaleValidator(control: AbstractControl): ValidationErrors | null {
                  const cfPattern = /^[a-zA-Z]{6}[0-9]{2}[a-zA-Z][0-9]{2}[a-zA-Z][0-9]{3}[a-zA-Z]$/;
                  if (cfPattern.test(control.value)) return null;
                  else return { cfNotValid: true }
                }

                export { codiceFiscaleValidator };
              </code>
            </pre>
          </section>
          <section>
            <p style="font-size: 1.5rem">reactive forms</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|2|23-25|7-17|9,11,16">
                import { Validators, FormControl } from '@angular/forms'
                import { codiceFiscaleValidator } from '../../somewhere';

                @Component({
                  selector: 'simple-login-form',
                  template: `
                      &lt;input
                        name="cf"
                        [formControl]="cfControl"
                      &gt;
                      &lt;p *ngIf="cfControl.hasError('cfNotValid')"&gt;
                        Codice fiscale non valido
                      &lt;/p&gt;
                      &lt;button 
                        (click)="submitCf()"
                        [disabled]="cfControl.invalid"
                      &gt;
                        Submit
                      &lt;/button&gt;
                  `,
                })
                export class SimpleLoginFormComponent {
                  cfControl = new FormControl('', [
                    codiceFiscaleValidator
                  ]);
                  submitCf() {
                    ...
                  }
                } 
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers style="max-height: unset;">
                import { codiceFiscaleValidator } from '../somewhere';

                @Directive({ 
                  selector: 'input[ngModel][codiceFiscale]',
                  providers: [
                    {
                      provide: NG_VALIDATORS,
                      useExisting: forwardRef(() => CFValidator),
                      multi: true
                    }
                  ] 
                })
                export class CFValidator implements Validator {
                  validate(control: AbstractControl): ValidationErrors | null {
                    return codiceFiscaleValidator(control);
                  }                  
                }
              </code>
            </pre>
          </section>
          <section>
            <p style="font-size: 1.5rem">template-driven forms</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|5-10|8|9,11,16">
                import { Validators, FormControl } from '@angular/forms'
                @Component({
                  selector: 'simple-login-form',
                  template: `
                      &lt;input
                        name="cf"
                        ngModel
                        codiceFiscale
                        #cfControl="ngModel"
                      &gt;
                      &lt;p *ngIf="cfControl.hasError('cfNotValid')"&gt;
                        Codice fiscale non valido
                      &lt;/p&gt;
                      &lt;button 
                        (click)="submitCf()"
                        [disabled]="cfControl.invalid"
                      &gt;
                        Submit
                      &lt;/button&gt;
                  `,
                })
                export class SimpleLoginFormComponent {
                  submitCf() {
                    ...
                  }
                } 
              </code>
            </pre>
          </section>
          <section>
            <h3>stato del form-control e css</h3>
            <ul>
              <li>.ng-valid</li>
              <li>.ng-invalid</li>
              <li>.ng-pending</li>
              <li>.ng-pristine</li>
              <li>.ng-dirty</li>
              <li>.ng-untouched</li>
              <li>.ng-touched</li>
              <li>.ng-submitted</li>
            </ul>
          </section>
          <section>
            <p style="font-size: 1.5rem">reactive forms</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|30-32|7,11,15|19-23">
                import { Validators, FormControl } from '@angular/forms'
                @Component({
                  selector: 'subscription-form',
                  template: `
                      &lt;input
                        name="name"
                        [formControl]="nameControl"
                      &gt;
                      &lt;input
                        name="surname"
                        [formControl]="surnameControl"
                      &gt;
                      &lt;input
                        name="cf"
                        [formControl]="cfControl"
                      &gt;
                      &lt;button 
                        (click)="submitCf()"
                        [disabled]="
                          nameControl.invalid || 
                          surnameControl.invalid || 
                          cfControl.invalid
                        "
                      &gt;
                        Submit
                      &lt;/button&gt;
                  `,
                })
                export class SubscriptionFormComponent {
                  nameControl = new FormControl('', [Validators.required, Validators.minLength(3)])
                  nameControl = new FormControl('', [Validators.required, Validators.minLength(3)])
                  nameControl = new FormControl('', [Validators.required, codiceFiscaleValidator])
                  submitCf() {
                    ...
                  }
                } 
              </code>
            </pre>
          </section>
          <section>
            <p style="font-size: 1.5rem">template-driven forms</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|10|17|24|28-32">
                import { Validators, FormControl } from '@angular/forms'
                @Component({
                  selector: 'subscription-form',
                  template: `
                      &lt;input
                        name="name"
                        ngModel
                        required
                        [minLength]="3"
                        #nameControl="ngModel"
                      &gt;
                      &lt;input
                        name="surname"
                        ngModel
                        required
                        [minLength]="3"
                        #surnameControl="ngModel"
                      &gt;
                      &lt;input
                        name="cf"
                        ngModel
                        required
                        codiceFiscale
                        #cfControl="ngModel"
                      &gt;
                      &lt;button 
                        (click)="submitCf()"
                        [disabled]="
                          nameControl.invalid || 
                          surnameControl.invalid || 
                          cfControl.invalid
                        "
                      &gt;
                        Submit
                      &lt;/button&gt;
                  `,
                })
                export class SubscriptionFormComponent {
                  submitCf() {
                    ...
                  }
                } 
              </code>
            </pre>
          </section>
          <section>
            <p>livello 2 - form complessi</p>
          </section>
          <section>
            <p style="font-size: 1.5rem">reactive forms</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|19-23|5,15|6-8|9-12|24-26">
                import { Validators, FormControl, FormGroup } from '@angular/forms'
                @Component({
                  selector: 'subscription-form',
                  template: `
                      &lt;form [formGroup]="myForm" (ngSubmit)="submitCf()"&gt;
                        &lt;input formControlName="name"&gt;
                        &lt;input formControlName="surname"&gt;
                        &lt;input formControlName="cf"&gt;
                        &lt;button
                          type="submit"
                          [disabled]="myForm.invalid"
                        &gt;
                          Submit
                        &lt;/button&gt;
                      &lt;/form&gt;
                  `,
                })
                export class SubscriptionFormComponent {
                  myForm = new FormGroup({
                    name: new FormControl('', [Validators.required, Validators.minLength(3)])
                    surname: new FormControl('', [Validators.required, Validators.minLength(3)])
                    cf: new FormControl('', [codiceFiscaleValidator)
                  })
                  submitCf() {
                    console.log(this.myForm.value) // { name: '', surname: '', cf: '' }
                  }
                } 
              </code>
            </pre>
          </section>
          <section>
            <p style="font-size: 1.5rem">template-driven forms</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|5-8|10|16|22|27-30|37-39">
                import { Validators, FormControl } from '@angular/forms'
                @Component({
                  selector: 'subscription-form',
                  template: `
                      &lt;form 
                        #myForm="ngForm" 
                        (ngSubmit)="submitCf(myForm.value)"
                      &gt;
                        &lt;input
                          name="name"
                          ngModel
                          required
                          [minLength]="3"
                        &gt;
                        &lt;input
                          name="surname"
                          ngModel
                          required
                          [minLength]="3"
                        &gt;
                        &lt;input
                          name="cf"
                          ngModel
                          required
                          codiceFiscale
                        &gt;
                        &lt;button
                          type="submit"
                          [disabled]="myForm.invalid"
                        &gt;
                          Submit
                        &lt;/button&gt;
                      &lt;/form&gt;
                  `,
                })
                export class SubscriptionFormComponent {
                  submitCf(v: any) {
                    console.log(v) // { name, surname, cf }
                  }
                } 
              </code>
            </pre>
          </section>
          <section>
            <p>Gruppi di controlli</p>
            <p style="font-size: 1.5rem">reactive forms</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|29-39|6-14|15-18|40-55">
                import { Validators, FormControl, FormGroup } from '@angular/forms'
                @Component({
                  selector: 'subscription-form',
                  template: `
                      &lt;form [formGroup]="myForm" (ngSubmit)="submitCf()"&gt;
                        &lt;div formGroupName="user"&gt;
                          &lt;input formControlName="name"&gt;
                          &lt;input formControlName="surname"&gt;
                          &lt;select formControlName="gender"&gt;
                            &lt;option value="M"&gt;Male&lt;/option&gt;
                            &lt;option value="F"&gt;Female&lt;/option&gt;
                            &lt;option value="O"&gt;Other&lt;/option&gt;
                          &lt;/select&gt;
                        &lt;/div&gt;
                        &lt;div formGroupName="address"&gt;
                          &lt;input formControlName="city"&gt;
                          &lt;input formControlName="street" type="number"&gt;
                        &lt;/div&gt;
                        &lt;button
                          type="submit"
                          [disabled]="myForm.invalid"
                        &gt;
                          Submit
                        &lt;/button&gt;
                      &lt;/form&gt;
                  `,
                })
                export class SubscriptionFormComponent {
                  myForm = new FormGroup({
                    user: new FormGroup({
                      name: new FormControl('', [Validators.required, Validators.minLength(3)])
                      surname: new FormControl('', [Validators.required, Validators.minLength(3)])
                      gender: new FormControl(null)
                    }),
                    address: new FormGroup({
                      city: new FormControl('')
                      street: new FormControl(0)
                    })
                  })
                  submitCf() {
                    console.log(this.myForm.value) 
                    /* { 
                      user: {
                        name: '',
                        surname: '',
                        gender: null,
                      },
                      address: {
                        city: '',
                        street: 0
                      }
                    } */
                  }
                } 
              </code>
            </pre>
          </section>
          <section>
            <p>Gruppi di controlli</p>
            <p style="font-size: 1.5rem">template-driven forms</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|5-13|14-17|28-41">
                @Component({
                  selector: 'subscription-form',
                  template: `
                      &lt;form #myForm="ngForm" (ngSubmit)="submitCf(myForm.value)"&gt;
                        &lt;div ngModelGroup="user"&gt;
                          &lt;input ngModel name="name" required [minLength]="3"&gt;
                          &lt;input ngModel name="surname" required [minLength]="3"&gt;
                          &lt;select ngModel name="gender"&gt;
                            &lt;option value="M"&gt;Male&lt;/option&gt;
                            &lt;option value="F"&gt;Female&lt;/option&gt;
                            &lt;option value="O"&gt;Other&lt;/option&gt;
                          &lt;/select&gt;
                        &lt;/div&gt;
                        &lt;div ngModelGroup="address"&gt;
                          &lt;input ngModel name="city"&gt;
                          &lt;input ngModel name="street" type="number"&gt;
                        &lt;/div&gt;
                        &lt;button
                          type="submit"
                          [disabled]="myForm.invalid"
                        &gt;
                          Submit
                        &lt;/button&gt;
                      &lt;/form&gt;
                  `,
                })
                export class SubscriptionFormComponent {
                  submitCf(formValue: any) {
                    console.log(formValue) 
                    /* { 
                      user: {
                        name: undefined,
                        surname: undefined,
                        gender: undefined,
                      },
                      address: {
                        city: undefined,
                        street: 0
                      }
                    } */
                  }
                } 
              </code>
            </pre>
            <aside class="notes">piccola licenza poetica, undefined</aside>
          </section>
          <section>
            <h2>Custom form component</h2>
            <aside class="notes">
              componenti non esistenti tra quelli base, estendere il potere di
              ngModel/formControl ad altri componenti
            </aside>
          </section>
          <section>
            <img
              src="https://docs.appian.com/suite/help/20.2/images/ux_pages/card_selection_example.png"
            />
          </section>
          <section>
            <h2>
              <a href="https://angular.io/api/forms/ControlValueAccessor"
                >control value accessor</a
              >
              e
              <a href="https://angular.io/api/forms/NG_VALUE_ACCESSOR"
                >NG_VALUE_ACCESSOR</a
              >
            </h2>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|24|5-14|1|15-21|23|30-41|25,30-32|26,33-35|27,36-38|28,39-41|8|7|43-47">
                import { NG_VALUE_ACCESSOR, ControlValueAccessor } from '@angular/forms';

                @Component({ 
                  selector: 'card-selection',
                  template: `
                    &lt;button *ngFor="let option of options" 
                      (click)="select(option.value)"
                      [disabled]="disabled"
                      [class.selected]="option.value === selectedValue"
                    &gt;
                      {{ option.description }}
                    &lt;/button&gt;
                  `,
                  styles: ['.selected { border-color: blue }, button { ... }'],
                  providers: [
                    {
                      provide: NG_VALUE_ACCESSOR,
                      useExisting: forwardRef(() => CardSelectionComponent),
                      multi: true
                    }
                  ] 
                })
                export class CardSelectionComponent implements ControlValueAccessor {
                  @Input() options: Option[] = [];
                  selectedValue: any = null;
                  onChange!: Function;
                  onTouched!: Function;
                  disabled = false;
                  
                  writeValue(obj: any): void {
                    this.selectedValue = obj;
                  }
                  registerOnChange(fn: any): void {
                    this.onChange = fn;
                  }
                  registerOnTouched(fn: any): void {
                    this.onTouched = fn;
                  }
                  setDisabledState(isDisabled: boolean)?: void {
                    this.disabled = isDisabled;
                  }

                  select(value: any) {
                    this.selectedValue = value;
                    this.onChange(value);
                    this.onTouched()
                  }
                  
                }
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|8-12,18-22">
                import { Validators, FormControl } from '@angular/forms'
                @Component({
                  selector: 'subscription-form',
                  template: `
                      &lt;form (ngSubmit)="submitCf(myForm.value)"&gt;
                        &lt;input name="name" ngModel&gt;
                        &lt;input name="surname" ngModel&gt;
                        &lt;card-selection
                          name="protection"
                          [ngModel]="protectionOptions[0].value"
                          [options]="protectionOptions"
                        &gt;&lt;/card-selection&gt;
                        &lt;button type="submit"&gt;Submit&lt;/button&gt;
                      &lt;/form&gt;
                  `,
                })
                export class SomeFormComponent {
                  protectionOptions = [
                    { description: 'Home', value: 'H' },
                    { description: 'Car', value: 'C' },
                    { description: 'Pet', value: 'P' },
                  ]
                  submitCf(v: any) { ... }
                } 
              </code>
            </pre>
          </section>
        </section>

        <section>
          <section><h1>Routing</h1></section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                import { Routes, RouterModule } from '@angular/router';

                const routes: Routes = [
                  { path: 'first-page', component: FirstComponent },
                  { path: 'second-page', component: SecondComponent },
                ];

                @NgModule({
                  imports: [RouterModule.forRoot(routes)],
                  exports: [RouterModule]
                })
                export class AppRoutingModule { }
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                import { AppRoutingModule } from './somewhere';

                @NgModule({
                  declarations: [
                    AppComponent,
                    ...
                  ],
                  imports: [
                    ...
                    AppRoutingModule
                    ...
                  ]
                })
                export class AppModule { }
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                @Component({
                  template: `
                    &lt;h1&gt;My wonderful App&lt;/h1&gt;
                    &lt;router-outlet&gt;&lt;/router-outlet&gt;
                  `
                })
                export class AppComponent { }
              </code>
            </pre>
          </section>
          <section>
            <p>http://localhost:4200/first-page</p>
            <p>http://localhost:4200/second-page</p>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|5-20|16,26">
                @Component({
                  template: `
                    &lt;nav&gt;
                      &lt;ul&gt;
                        &lt;li&gt;
                          &lt;a 
                            routerLink="/first-page" 
                            routerLinkActive="link-active"
                          &gt;
                            First Page
                          &lt;/a&gt;
                        &lt;/li&gt;
                        &lt;li&gt;
                          &lt;a 
                            routerLink="/second-page" 
                            routerLinkActive="link-active"
                          &gt;
                            Second Page
                          &lt;/a&gt;
                        &lt;/li&gt;
                      &lt;/ul&gt;
                    &lt;/nav&gt;
                    &lt;h1&gt;My wonderful App&lt;/h1&gt;
                    &lt;router-outlet&gt;&lt;/router-outlet&gt;
                  `,
                  styles: ['a {color: black}, a.link-active { color: blue}']
                })
                export class AppComponent { }
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="11-18">
                import { Router } from '@angular/router';

                @Component({
                  template: `
                    &lt;h1&gt;My wonderful App&lt;/h1&gt;
                    &lt;router-outlet&gt;&lt;/router-outlet&gt;
                  `
                })
                export class AppComponent {

                  constructor(private router: Router) {}

                  goToFirstPage() {
                    this.router.navigate(['first-page'])
                  }
                  goToSecondPage() {
                    this.router.navigate(['second-page'])
                  }
                }
              </code>
            </pre>
          </section>
          <section>
            <p>** wildcard</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|6">
                import { Routes, RouterModule } from '@angular/router';

                const routes: Routes = [
                  { path: 'first-page', component: FirstComponent },
                  { path: 'second-page', component: SecondComponent },
                  { path: '**', component: PageNotFoundComponent },
                ];

                @NgModule({
                  imports: [RouterModule.forRoot(routes)],
                  exports: [RouterModule]
                })
                export class AppRoutingModule { }
              </code>
            </pre>
          </section>
          <section>
            <p>redirectTo</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|7,4">
                import { Routes, RouterModule } from '@angular/router';

                const routes: Routes = [
                  { path: 'first-page', component: FirstComponent },
                  { path: 'second-page', component: SecondComponent },
                  { path: '**', component: PageNotFoundComponent },
                  { path: '', redirectTo: 'first-page', pathMatch: 'full' },
                ];

                @NgModule({
                  imports: [RouterModule.forRoot(routes)],
                  exports: [RouterModule]
                })
                export class AppRoutingModule { }
              </code>
            </pre>
          </section>
          <section>
            <p>Innestare Rotte - children</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|6-15">
                import { Routes, RouterModule } from '@angular/router';

                const routes: Routes = [
                  { 
                    path: 'first-page', 
                    children: [
                      {
                        path: 'first-sub-page'
                        component: FirstSubComponent
                      },
                      {
                        path: 'second-sub-page'
                        component: SecondSubComponent
                      },
                    ]
                  },
                  { path: 'second-page', component: SecondComponent },
                  { path: '**', component: PageNotFoundComponent },
                  { path: '', redirectTo: 'first-page', pathMatch: 'full' },
                ];

                @NgModule({
                  imports: [RouterModule.forRoot(routes)],
                  exports: [RouterModule]
                })
                export class AppRoutingModule { }
              </code>
            </pre>
          </section>
          <section>
            <p>http://localhost:4200/first-page/first-sub-page</p>
            <p>http://localhost:4200/first-page/second-sub-page</p>
          </section>
          <section>
            <p>pathMatch</p>
            <ul>
              <li>"prefix" (default)</li>
              <li>"full"</li>
            </ul>
            <aside class="notes">
              come il router fa il matching delle rotte: di base prende l'url e
              lo spezza e poi progressivamente cerca di fare il match cercando
              nei children. Con full invece il confronto deve essere sull'intero
              url
            </aside>
          </section>
          <section>
            <p>path params</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|7-10">
                import { Routes, RouterModule } from '@angular/router';

                const routes: Routes = [
                  { 
                    path: 'first-page', 
                    children: [
                      {
                        path: ':some-param'
                        component: FirstSubComponent
                      },
                      {
                        path: 'second-sub-page'
                        component: SecondSubComponent
                      },
                    ]
                  },
                  { path: 'second-page', component: SecondComponent },
                  { path: '**', component: PageNotFoundComponent },
                  { path: '', redirectTo: 'first-page', pathMatch: 'full' },
                ];

                @NgModule({
                  imports: [RouterModule.forRoot(routes)],
                  exports: [RouterModule]
                })
                export class AppRoutingModule { }
              </code>
            </pre>
            <aside class="notes">
              come wildcard...qualsiasi path fa il match, però quel path dopo i
              : può essere usato come riferimento per accedere al dato passato
            </aside>
          </section>
          <section>
            <p>http://localhost:4200/first-page/whatever-works</p>
            <p class="fragment">http://localhost:4200/user/13152</p>
          </section>
          <section>
            <h2>ottenere informazioni dalle rotte</h2>
          </section>
          <section>
            <p>path params / query params</p>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|7-10">
                import { Routes, RouterModule } from '@angular/router';

                const routes: Routes = [
                  { 
                    path: 'first-page', 
                    children: [
                      {
                        path: ':some-param'
                        component: FirstSubComponent
                      },
                      {
                        path: 'second-sub-page'
                        component: SecondSubComponent
                      },
                    ]
                  },
                  { path: 'second-page', component: SecondComponent },
                  { path: '**', component: PageNotFoundComponent },
                  { path: '', redirectTo: 'first-page', pathMatch: 'full' },
                ];

                @NgModule({
                  imports: [RouterModule.forRoot(routes)],
                  exports: [RouterModule]
                })
                export class AppRoutingModule { }
              </code>
            </pre>
          </section>
          <section>
            <p>http://localhost:4200/first-page/my-awesome-value</p>
          </section>
          <section>
            <p style="font-size: 1rem">
              http://localhost:4200/first-page/my-awesome-value
            </p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|1,10|11|12">
                import { ActivatedRoute } from '@angular/router';

                @Component({
                  template: `
                    &lt;h1&gt;The path parameter is {{ pathParam }}&lt;/h1&gt;
                  `,
                })
                export class FirstSubComponent {

                  constructor(private activatedRoute: ActivatedRoute) {
                    this.pathParam = this.activatedRoute.snapshot.params['some-param'];
                    console.log(this.pathParam) // "my-awesome-value"
                  }
                }
              </code>
            </pre>
            <aside class="notes">
              RouterState in costante mutamento. snapshot è lo stato del router
              in un particolare momento, nella fattispecie quando la rotta c'è
              un match e il componente è creato di conseguenza. Snapshot dello
              stato
            </aside>
          </section>
          <section>
            <p>
              http://localhost:4200/first-page/my-awesome-value?some-key="12345"
            </p>
          </section>
          <section>
            <p style="font-size: 1rem">
              http://localhost:4200/first-page/my-awesome-value?some-key="12345"
            </p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|1,10|12,14">
                import { ActivatedRoute } from '@angular/router';

                @Component({
                  template: `
                    &lt;h1&gt;The path parameter is {{ pathParam }}&lt;/h1&gt;
                  `,
                })
                export class FirstSubComponent {

                  constructor(private activatedRoute: ActivatedRoute) {
                    this.pathParam = this.activatedRoute.snapshot.params['some-param'];
                    this.queryParam = this.activateRoute.snapshot.queryParams['some-key']
                    console.log(this.pathParam) // "my-awesome-value"
                    console.log(this.queryParam) // "12345"
                  }
                }
              </code>
            </pre>
            <aside class="notes">
              params e queryParams in uno snapshot sono semplici oggetti
            </aside>
          </section>
          <section>
            <p style="font-size: 1rem">
              http://localhost:4200/first-page/my-awesome-value?some-key="12345"
            </p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|10-15">
                import { ActivatedRoute } from '@angular/router';

                @Component({
                  template: `
                    &lt;router-outlet&gt;&lt;/router-outlet&gt;
                  `,
                })
                export class AppComponent {

                  constructor(private activatedRoute: ActivatedRoute) {
                    this.activatedRoute.params.subscribe(console.log) 
                    // ... { some-param: 'my-awesome-value'} ...
                    this.activatedRoute.queryParams.subscribe(console.log) 
                    // ... { some-key: '12345' } ...
                  }
                }
              </code>
            </pre>
            <aside class="notes">
              su activatedRoute non snapshot sono observable
            </aside>
          </section>
          <section>
            <p>static data</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|5-8">
                const routes: Routes = [
                  { 
                    path: 'first-page', 
                    component: FirstComponent
                    data: {
                      hello: 'World!',
                      importantNumber: 123456
                    }
                  },
                ];
              </code>
            </pre>
            <aside class="notes">valori annessi alle rotte stesse</aside>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|1,10|11,13|12,14">
                import { ActivatedRoute } from '@angular/router';

                @Component({
                  template: `
                    &lt;h1&gt;Static data!!&lt;/h1&gt;
                  `,
                })
                export class FirstSubComponent {

                  constructor(private activatedRoute: ActivatedRoute) {
                    this.data1 = this.activatedRoute.snapshot.data['hello'];
                    this.data2 = this.activateRoute.snapshot.data['importantNumber']
                    console.log(this.data1) // "World!"
                    console.log(this.data2) // 123456
                  }
                }
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|10-15">
                import { ActivatedRoute } from '@angular/router';

                @Component({
                  template: `
                    &lt;router-outlet&gt;&lt;/router-outlet&gt;
                  `,
                })
                export class AppComponent {

                  constructor(private activatedRoute: ActivatedRoute) {
                    this.activatedRoute.data.subscribe(console.log) 
                    // ... { hello: 'World!', importantNumber: 123456 } ...
                    
                  }
                }
              </code>
            </pre>
          </section>
          <section>
            <h3>dynamic data</h3>
            <h4>resolvers</h4>
            <p class="fragment">http://localhost:4200/user/:id/details</p>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|2|3|3-5">
                export function userDetailsResolver
                (route: ActivatedRouteSnapshot, state: RouterStateSnapshot): 
                Observable&lt;UserDetails&gt; | Promise&lt;UserDetails&gt; | UserDetails {
                  const userService = inject(UserService);
                  return userService.getUserDetailsById(route.params.id);
                }
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|10-15">
                import { userDetailsResolver } from './somewhere';
                const routes: Routes = [
                  { 
                    path: 'user/:id', 
                    children: [
                      {
                        path: 'details',
                        component: UserDetailsComponent,
                        resolve: {
                          userDetails: userDetailsResolver
                        }
                      }
                    ]
                  },
                ];
              </code>
            </pre>
          </section>
          <section>
            <div class="r-stack">
              <p>ng g r user-details</p>
              <pre class="language-javascript">
                <code data-trim data-line-numbers="1-100|4|5|7-11">
                  import { Resolve } from '@angular/router';
  
                  @Injectable({ providedIn: 'root' })
                  export class UserDetailsResolver implements Resolve&lt;UserDetails&gt; {
                    constructor(private userService: UserService) {}
                    
                    resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): 
                    Observable&lt;UserDetails&gt; | Promise&lt;UserDetails&gt; | UserDetails 
                    {
                      return this.userService.getUserDetails(route.snapshot.id);
                    }
                  }
                </code>
              </pre>
              <h1 class="fragment">DEPRECATED!</h1>
            </div>
          </section>
          <section>
            <div class="r-stack">
              <pre class="language-javascript">
                <code data-trim data-line-numbers="1-100|9-11">
                  import { UserDetailsResolver } from './somewhere';
                  const routes: Routes = [
                    { 
                      path: 'user/:id', 
                      children: [
                        {
                          path: 'details',
                          component: UserDetailsComponent,
                          resolve: {
                            userDetails: UserDetailsResolver
                          }
                        }
                      ]
                    },
                  ];
                </code>
              </pre>
              <h1 class="fragment">DEPRECATED!</h1>
            </div>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|1,10|11,12">
                import { ActivatedRoute } from '@angular/router';

                @Component({
                  template: `
                    &lt;h1&gt;Static data!!&lt;/h1&gt;
                  `,
                })
                export class UserDetailsComponent {

                  constructor(private activatedRoute: ActivatedRoute) {
                    this.userDetails = this.activatedRoute.snapshot.data['userDetails'];
                    console.log(this.userDetails) // { name: 'Mario', ... }
                  }
                }
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|10-15">
                import { ActivatedRoute } from '@angular/router';

                @Component({
                  template: `
                    &lt;router-outlet&gt;&lt;/router-outlet&gt;
                  `,
                })
                export class AppComponent {

                  constructor(private activatedRoute: ActivatedRoute) {
                    this.activatedRoute.data.subscribe(console.log) 
                    // ... { userDetails: { name: 'Mario', ... } ...
                    
                  }
                }
              </code>
            </pre>
          </section>
          <section>
            <h3>recap - come ottenere dati dalla navigazione?</h3>
            <ul>
              <li>path params</li>
              <li>query params</li>
              <li>static data (<i>data</i>)</li>
              <li>dynamic data (<i>resolvers</i>)</li>
            </ul>
          </section>

          <section>
            <h2>modificare la navigazione in corso</h2>
            <h3>guards</h3>
          </section>

          <section>
            <p>canActivate</p>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|2|3|4-7">
                export function userHasLoggedIn
                (next: ActivatedRouteSnapshot, state: RouterStateSnapshot): 
                Observable&lt;boolean | UrlTree&gt; | Promise&lt;boolean | UrlTree&gt; | boolean | UrlTree
                {
                  const sessionService = inject(SessionService);
                  return sessionService.userHasLoggedIn(next.params.id);
                }
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|6-8">
                import { userHasLoggedIn } from './somewhere';
                const routes: Routes = [
                  { 
                    path: 'user/:id', 
                    component: UserComponent,
                    canActivate: [
                      userHasLoggedIn
                    ]
                  },
                ];
              </code>
            </pre>
          </section>
          <section>
            <div class="r-stack">
              <p>ng g g has-logged-in</p>
              <pre class="language-javascript">
                <code data-trim data-line-numbers="1-100|4|6|7-12">
                  import { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';
                
                  @Injectable({ providedIn: 'root' })
                  export class HasLoggedeInGuard implements CanActivate {
                    constructor(private sessionService: SessionService) {}
                    canActivate(
                      next: ActivatedRouteSnapshot,
                      state: RouterStateSnapshot): 
                        Observable&lt;boolean | UrlTree&gt; | Promise&lt;boolean | UrlTree&gt; | boolean | UrlTree 
                      {
                        return this.sessionService.userHasLoggedIn(next.params.id);
                      }
                  }
                </code>
              </pre>
              <h1 class="fragment">DEPRECATED!</h1>
            </div>
          </section>
          <section>
            <div class="r-stack">
              <pre class="language-javascript">
                <code data-trim data-line-numbers="1-100">
                  import { UserHasLoggedInGuard } from './somewhere';
                  const routes: Routes = [
                    { 
                      path: 'user/:id',
                      component: UserDetailsComponent,
                      canActivate: [
                        UserHasLoggedInGuard
                      ]
                      
                    },
                  ];
                </code>
              </pre>
              <h1 class="fragment">DEPRECATED!</h1>
            </div>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|3|7-13|5,10">
                export function userHasLoggedIn
                (next: ActivatedRouteSnapshot, state: RouterStateSnapshot): 
                Observable&lt;boolean | UrlTree&gt; | Promise&lt;boolean | UrlTree&gt; | boolean | UrlTree
                {
                  const router = inject(Router);
                  const sessionService = inject(SessionService);
                  return sessionService.userHasLoggedIn(next.params.id).pipe(
                    map(hasLoggedIn => {
                      if (!hasLoggedIn) {
                        return this.router.createUrlTree(['/login'])
                      } else return true;
                    })
                  );
                }
              </code>
            </pre>
          </section>
          <section>
            <p>canActivateChild</p>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|9-11|16-18|23-25">
                import { userHasLoggedIn } from './somewhere';
                const routes: Routes = [
                  { 
                    path: 'user/:id', 
                    children: [
                      {
                        path: 'details',
                        component: UserDetailsComponent,
                        canActivate: [
                          userHasLoggedIn
                        ]
                      },
                      {
                        path: 'details',
                        component: UserSettingsComponent,
                        canActivate: [
                          userHasLoggedIn
                        ]
                      },
                      {
                        path: 'profile',
                        component: UserProfileComponent,
                        canActivate: [
                          userHasLoggedIn
                        ]
                      }
                    ]
                  },
                ];
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|5-7">
                import { userHasLoggedIn } from './somewhere';
                const routes: Routes = [
                  { 
                    path: 'user/:id', 
                    canActivateChild: [
                      userHasLoggedIn
                    ]
                    children: [
                      {
                        path: 'details',
                        component: UserDetailsComponent,
                      },
                      {
                        path: 'details',
                        component: UserSettingsComponent,
                      },
                      {
                        path: 'profile',
                        component: UserProfileComponent,
                      }
                    ]
                  },
                ];
              </code>
            </pre>
          </section>
          <section>
            <p>canDeactivate</p>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|29-39">
                import { Validators, FormControl, FormGroup } from '@angular/forms'
                @Component({
                  selector: 'subscription-form',
                  template: `
                      &lt;form [formGroup]="myForm" (ngSubmit)="submitCf()"&gt;
                        &lt;div formGroupName="user"&gt;
                          &lt;input formControlName="name"&gt;
                          &lt;input formControlName="surname"&gt;
                          &lt;select formControlName="gender"&gt;
                            &lt;option value="M"&gt;Male&lt;/option&gt;
                            &lt;option value="F"&gt;Female&lt;/option&gt;
                            &lt;option value="O"&gt;Other&lt;/option&gt;
                          &lt;/select&gt;
                        &lt;/div&gt;
                        &lt;div formGroupName="address"&gt;
                          &lt;input formControlName="city"&gt;
                          &lt;input formControlName="street" type="number"&gt;
                        &lt;/div&gt;
                        &lt;button
                          type="submit"
                          [disabled]="myForm.invalid"
                        &gt;
                          Submit
                        &lt;/button&gt;
                      &lt;/form&gt;
                  `,
                })
                export class SubscriptionFormComponent {
                  myForm = new FormGroup({
                    user: new FormGroup({
                      name: new FormControl('', [Validators.required, Validators.minLength(3)])
                      surname: new FormControl('', [Validators.required, Validators.minLength(3)])
                      gender: new FormControl(null)
                    }),
                    address: new FormGroup({
                      city: new FormControl('')
                      street: new FormControl(0)
                    })
                  })
                  submitCf() {
                    console.log(this.myForm.value) 
                    /* { 
                      user: {
                        name: '',
                        surname: '',
                        gender: null,
                      },
                      address: {
                        city: '',
                        street: 0
                      }
                    } */
                  }
                } 
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|1,6">
                import { hasCompletedForm } from './somewhere';
                const routes: Routes = [
                  { 
                    path: 'subscription', 
                    component: SubscriptionFormComponent,
                    canDeactivate: [hasCompletedForm]
                  },
                ];
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|2-5|6|7-9">
                export function hasCompletedForm
                (component: SubscriptionFormComponent, 
                currentRoute: ActivatedRouteSnapshot, 
                currentState: RouterStateSnapshot, 
                nextState: RouterStateSnapshot): 
                Observable&lt;boolean | UrlTree&gt; | Promise&lt;boolean | UrlTree&gt; | boolean | UrlTree
                {
                  return !component.myForm.dirty;
                }
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|2-5|6|7-14">
                export function hasCompletedForm
                (component: SubscriptionFormComponent, 
                currentRoute: ActivatedRouteSnapshot, 
                currentState: RouterStateSnapshot, 
                nextState: RouterStateSnapshot): 
                Observable&lt;boolean | UrlTree&gt; | Promise&lt;boolean | UrlTree&gt; | boolean | UrlTree
                {
                  if (component.myForm.dirty) {
                    return this.alertService
                      .askForConfirmation('sei sicuro di uscire?')
                      .afterClosed()
                  } else return true;
                }
              </code>
            </pre>
          </section>
          <section>
            <h3>modificare la navigazione</h3>
            <ul>
              <li>canActivate</li>
              <li>canActivateChild</li>
              <li>canDeactivate</li>
              <li style="opacity: 0.5">canMatch</li>
            </ul>
          </section>
          <section>
            <h2>suddividere l'applicazione - lazy loading</h2>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|4-16">
                import { Routes, RouterModule } from '@angular/router';

                const routes: Routes = [
                  { 
                    path: 'first-page', 
                    children: [
                      {
                        path: 'first-sub-page'
                        component: FirstSubComponent
                      },
                      {
                        path: 'second-sub-page'
                        component: SecondSubComponent
                      },
                    ]
                  },
                  { path: 'second-page', component: SecondComponent },
                  { path: '**', component: PageNotFoundComponent },
                  { path: '', redirectTo: 'first-page', pathMatch: 'full' },
                ];

                @NgModule({
                  imports: [RouterModule.forRoot(routes)],
                  exports: [RouterModule]
                })
                export class AppRoutingModule { }
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="18|1-100|3-12|14-18|16|15">
                import { Routes, RouterModule } from '@angular/router';

                const routes: Routes = [
                  {
                    path: 'first-sub-page'
                    component: FirstSubComponent
                  },
                  {
                    path: 'second-sub-page'
                    component: SecondSubComponent
                  },
                ];

                @NgModule({
                  declarations: [FirstSubComponent, SecondSubComponent]
                  imports: [RouterModule.forChild(routes)]
                })
                export class FirstPageModule { }
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="18|1-100|4-8">
                import { Routes, RouterModule } from '@angular/router';

                const routes: Routes = [
                  { 
                    path: 'first-page', 
                    loadChildren: () => import('./path/to/first-page.module').
                      then(m => m.FirstPageModule)
                  },
                  { path: 'second-page', component: SecondComponent },
                  { path: '**', component: PageNotFoundComponent },
                  { path: '', redirectTo: 'first-page', pathMatch: 'full' },
                ];

                @NgModule({
                  imports: [RouterModule.forRoot(routes)],
                  exports: [RouterModule]
                })
                export class AppRoutingModule { }
              </code>
            </pre>
          </section>
          <section>
            <h3>lazy loading components (only standalone, v14+)</h3>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|9-14">
                import { Routes, RouterModule } from '@angular/router';

                const routes: Routes = [
                  { 
                    path: 'first-page', 
                    loadChildren: () => import('./path/to/first-page.module').
                      then(m => m.FirstPageModule)
                  },
                  { path: 
                    'second-page', 
                    loadComponent: 
                      () => import('./path/to/standalone/component')
                        .then(c => c.SecondComponent)
                  },
                ];

              </code>
            </pre>
          </section>
          <section>
            <p>canMatch</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|8,14">
                import { userHasPermissions } from './somewhere';

                const routes: Routes = [
                  { 
                    path: 'admin', 
                    loadChildren: () => import('./path/to/admin.module').
                      then(m => m.AdminModule),
                    canMatch: [userHasPermissions]
                  },
                  { path: 'second-page', 
                    loadComponent: 
                      () => import('./path/to/standalone/component')
                        .then(c => c.SecondComponent),
                      canMatch: [userHasPermissions]
                  },
                ];

              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|2|3|4-100">
                export function userHasPermissions
                  (route: Route, segments: UrlSegment[]): 
                  Observable&lt;boolean | UrlTree&gt; | Promise&lt;boolean | UrlTree&gt; | boolean | UrlTree
                  {
                    const loggedUserService = inject(LoggedUserService);
                    return loggedUserService.isAdmin();
                  }
              </code>
            </pre>
          </section>
        </section>

        <section>
          <section><h2>template</h2></section>
          <section>
            <h3>
              <a
                href="https://angular.io/guide/content-projection"
                target="_blank"
                >content projection</a
              >
            </h3>
          </section>
          <section>
            <p>single-slot content projection</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|5">
                @Component({
                  selector: 'centered-layout',
                  template: `
                    &lt;div style="display: flex; justify-content: 'center'"&gt;
                      &lt;ng-content&gt;&lt;/ng-content&gt;
                    &lt;/div&gt;
                  `,
                })
                export class CenteredLayoutComponent {} 
              </code>
            </pre>
          </section>
          <section>
            <p>multi-slot content projection</p>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|4,15|5-8|9-11|12-14">
                @Component({
                  selector: 'page-layout',
                  template: `
                  &lt;div class="grid"&gt;
                    &lt;nav&gt;
                      &lt;ng-content select="[navLogo]"&gt;&lt;/ng-content&gt;
                      &lt;ng-content select="[navItems]"&gt;&lt;/ng-content&gt;
                    &lt;/nav&gt;
                    &lt;aside&gt;
                      &lt;ng-content select="[sideContent]"&gt;&lt;/ng-content&gt;
                    &lt;/aside&gt;
                    &lt;main&gt;
                      &lt;ng-content&gt;&lt;/ng-content&gt;
                    &lt;/main&gt;
                  &lt;/div&gt;
                  `,
                })
                export class PageLayoutComponent {} 
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="19|4,16|5-10|11-13|14-15">
                @Component({
                  selector: 'some-page',
                  template: `
                    &lt;page-layout&gt;
                      &lt;img src="..." navLogo&gt;
                      &lt;div navItems&gt;
                        &lt;a routerLink="/home"&gt;Home&lt;/a&gt;
                        &lt;a routerLink="/about us"&gt;About us&lt;/a&gt;
                        &lt;a routerLink="/contacts"&gt;Contacts&lt;/a&gt;
                      &lt;/div&gt;
                      &lt;form sideContent&gt;
                        ...
                      &lt;/form&gt;
                      &lt;h1&gt;Page title&lt;/h1&gt;
                      &lt;p&gt;Lorem ipsum...&lt;/p&gt;
                    &lt;/page-layout&gt;
                  `,
                })
                export class SomePageComponent {} 
              </code>
            </pre>
          </section>

          <section>
            <h3>Accedere agli elementi del contenuto del componente</h3>
            <p>@ContentChild / @ContentChildren</p>
          </section>

          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="9,2|11-13">
                @Component({
                  selector: 'some-awesome-component',
                  template: `
                    &lt;h1&gt;
                      I do awesome stuff!
                    &lt;/h1&gt;
                  `,
                })
                export class SomeAwesomeComponent {

                  doAwesomeStuff() {
                    console.log('Wow!')
                  }
                } 
              </code>
            </pre>
          </section>

          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|4,6|5">
                @Component({
                  selector: 'some-page',
                  template: `
                    &lt;page-layout&gt;
                      &lt;some-awesome-component&gt;&lt;/some-awesome-component&gt;
                    &lt;/page-layout&gt;
                  `,
                })
                export class SomePageComponent {} 
              </code>
            </pre>
          </section>

          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="18|19|21-24|26-28|18">
                @Component({
                  selector: 'page-layout',
                  template: `
                  &lt;div class="grid"&gt;
                    &lt;nav&gt;
                      &lt;ng-content select="[navLogo]"&gt;&lt;/ng-content&gt;
                      &lt;ng-content select="[navItems]"&gt;&lt;/ng-content&gt;
                    &lt;/nav&gt;
                    &lt;aside&gt;
                      &lt;ng-content select="[sideContent]"&gt;&lt;/ng-content&gt;
                    &lt;/aside&gt;
                    &lt;main&gt;
                      &lt;ng-content&gt;&lt;/ng-content&gt;
                    &lt;/main&gt;
                  &lt;/div&gt;
                  `,
                })
                export class PageLayoutComponent implements OnInit, AfterContentInit {
                  @ContentChild(SomeAwesomeComponent) someAwesomeCompoent!: SomeAwesomeComponent;

                  ngOnInit() {
                    this.someAwesomeComponent.doAwesomeStuff() 
                    // Error! try to access 'doAwesomeStuff' of undefined
                  }

                  ngAfterContentInit() {
                    this.someAwesomeComponent.doAwesomeStuff() // 'Wow!'
                  }
                } 
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="19|4,6|5">
                @Component({
                  selector: 'some-page',
                  template: `
                    &lt;page-layout&gt;
                      &lt;some-awesome-component #thisIsAReference&gt;&lt;/some-awesome-component&gt;
                    &lt;/page-layout&gt;
                  `,
                })
                export class SomePageComponent {} 
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="19">
                @Component({
                  selector: 'page-layout',
                  template: `
                  &lt;div class="grid"&gt;
                    &lt;nav&gt;
                      &lt;ng-content select="[navLogo]"&gt;&lt;/ng-content&gt;
                      &lt;ng-content select="[navItems]"&gt;&lt;/ng-content&gt;
                    &lt;/nav&gt;
                    &lt;aside&gt;
                      &lt;ng-content select="[sideContent]"&gt;&lt;/ng-content&gt;
                    &lt;/aside&gt;
                    &lt;main&gt;
                      &lt;ng-content&gt;&lt;/ng-content&gt;
                    &lt;/main&gt;
                  &lt;/div&gt;
                  `,
                })
                export class PageLayoutComponent implements OnInit, AfterContentInit {
                  @ContentChild('thisIsAReference') someAwesomeCompoent!: SomeAwesomeComponent;

                  ngOnInit() {
                    this.someAwesomeComponent.doAwesomeStuff() 
                    // Error! try to access 'doAwesomeStuff' of undefined
                  }

                  ngAfterContentInit() {
                    this.someAwesomeComponent.doAwesomeStuff() // 'Wow!'
                  }
                } 
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="4-10">
                @Component({
                  selector: 'some-page',
                  template: `
                    &lt;page-layout&gt;
                      &lt;some-awesome-component #thisIsAReference&gt;&lt;/some-awesome-component&gt;
                      &lt;some-awesome-component #thisIsAReference&gt;&lt;/some-awesome-component&gt;
                      &lt;some-awesome-component #thisIsAReference&gt;&lt;/some-awesome-component&gt;
                      &lt;some-awesome-component #thisIsAReference&gt;&lt;/some-awesome-component&gt;
                      &lt;some-awesome-component #thisIsAReference&gt;&lt;/some-awesome-component&gt;
                    &lt;/page-layout&gt;
                  `,
                })
                export class SomePageComponent {} 
              </code>
            </pre>
          </section>

          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="19-20|22-25">
                @Component({
                  selector: 'page-layout',
                  template: `
                  &lt;div class="grid"&gt;
                    &lt;nav&gt;
                      &lt;ng-content select="[navLogo]"&gt;&lt;/ng-content&gt;
                      &lt;ng-content select="[navItems]"&gt;&lt;/ng-content&gt;
                    &lt;/nav&gt;
                    &lt;aside&gt;
                      &lt;ng-content select="[sideContent]"&gt;&lt;/ng-content&gt;
                    &lt;/aside&gt;
                    &lt;main&gt;
                      &lt;ng-content&gt;&lt;/ng-content&gt;
                    &lt;/main&gt;
                  &lt;/div&gt;
                  `,
                })
                export class PageLayoutComponent implements AfterContentInit {
                  @ContentChildren('thisIsAReference') 
                  someAwesomeCompoents!: QueryList&lt;SomeAwesomeComponent&gt;;

                  ngAfterContentInit() {
                    this.someAwesomeComponents.last.doAwesomeStuff() // 'Wow!'
                    const compArr = this.someAwesomeComponents.toArray()
                  }
                } 
              </code>
            </pre>
          </section>
          
          <section>
            <h3>Accedere agli elementi nel template</h3>
            <p>@ViewChild / @ViewChildren</p>
          </section>

          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-6|8|10-13|15-17|7">
                @Component({
                  selector: 'some-page',
                  template: `
                    &lt;some-awesome-component&gt;&lt;/some-awesome-component&gt;
                  `,
                })
                export class SomePageComponent implements OnInit, AfterViewInit {
                  @ViewChild(SomeAwesomeComponent) someAwesomeComponent!: SomeAwesomeComponent;

                  ngOnInit() {
                    this.someAwesomeComponent.doAwesomeStuff()
                    // Error! try to access 'doAwesomeStuff' of undefined
                  }

                  ngAfterViewInit() {
                    this.someAwesomeComponent.doAwesomeStuff() // Wow!
                  }

                } 
              </code>
            </pre>
          </section>

          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-6|8|15-17">
                @Component({
                  selector: 'some-page',
                  template: `
                    &lt;some-awesome-component #thisIsAReference&gt;&lt;/some-awesome-component&gt;
                  `,
                })
                export class SomePageComponent implements OnInit, AfterViewInit {
                  @ViewChild('thisIsAReference') someAwesomeComponent!: SomeAwesomeComponent;

                  ngOnInit() {
                    this.someAwesomeComponent.doAwesomeStuff()
                    // Error! try to access 'doAwesomeStuff' of undefined
                  }

                  ngAfterViewInit() {
                    this.someAwesomeComponent.doAwesomeStuff() // Wow!
                  }

                } 
              </code>
            </pre>
          </section>

          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-12|14-15|17-20">
                @Component({
                  selector: 'some-page',
                  template: `
                    &lt;some-awesome-component&gt;&lt;/some-awesome-component&gt;
                    &lt;some-awesome-component&gt;&lt;/some-awesome-component&gt;
                    &lt;some-awesome-component&gt;&lt;/some-awesome-component&gt;
                    &lt;some-awesome-component&gt;&lt;/some-awesome-component&gt;
                    &lt;some-awesome-component&gt;&lt;/some-awesome-component&gt;
                    &lt;some-awesome-component&gt;&lt;/some-awesome-component&gt;
                    &lt;some-awesome-component&gt;&lt;/some-awesome-component&gt;
                  `,
                })
                export class SomePageComponent implements OnInit, AfterViewInit {
                  @ViewChildren(SomeAwesomeComponent) 
                  someAwesomeComponent!: QueryList&lt;SomeAwesomeComponent&gt;

                  ngAfterViewInit() {
                    this.someAwesomeComponent.first.doAwesomeStuff() // Wow!
                    const compArr = this.someAwesomeComponent.toArray()
                  }

                } 
              </code>
            </pre>
          </section>
          
          <section>
            <img
              width="400"
              src="https://codecraft.tv/courses/angular/components/lifecycle-hooks/images/lifecycle-hooks.png"
              alt=""
            />
          </section>

          <section><h2>accedere agli elementi nel DOM</h2></section>

          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                @Component({
                  selector: 'some-page',
                  template: `
                    &lt;h1&gt;My Title&lt;/h1&gt;
                    &lt;p&gt;A paragraph...&lt;/p&gt;
                  `,
                })
                export class SomePageComponent{ } 
              </code>
            </pre>
          </section>

          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                @Component({
                  selector: 'some-page',
                  template: `
                    &lt;h1 #pageTitle&gt;My Title&lt;/h1&gt;
                    &lt;p #paragraph&gt;A paragraph...&lt;/p&gt;
                  `,
                })
                export class SomePageComponent implements AfterViewInit {
                  @ViewChild('pageTitle') pageTitle: ElementRef&lt;HtmlHeadingElement&gt;
                  @ViewChild('paragraph') paragraph: ElementRef&lt;HtmlParagraphElement&gt;

                  ngAfterViewInit() {
                    console.log(this.pageTitle) 
                    // { nativeElement: { textContent, innerHtml, children... etc. } }
                    this.paragraph.nativeElement.style.color = 'red';
                  }
                } 
              </code>
            </pre>
          </section>

          <section>
            <h2><a href="https://angular.io/api/core/ElementRef" target="_blank">Element Ref</a></h2>
          </section>

          <section>
            <h2>template ref</h2>
          </section>
          <section>
            <p>la verità sulle direttive strutturali</p>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100">
                @Component({
                  selector: 'some-page',
                  template: `
                    &lt;some-awesome-component *ngIf="someCondition"&gt;&lt;/some-awesome-component&gt;
                  `,
                })
                export class SomePageComponent { } 
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100">
                @Component({
                  selector: 'some-page',
                  template: `
                    &lt;ng-template [ngIf]="someCondition"&gt;
                      &lt;some-awesome-component&gt;
                    &lt;/ng-template&gt;
                  `,
                })
                export class SomePageComponent { } 
              </code>
            </pre>
          </section>
          
        </section>

        <section>
          <section>
            <h1>Angular - under the hood</h1>
            <h3 class="fragment">attenzione! API di basso livello</h3>
            <aside class="notes">no alto livello, no macrostruttura app, no funzionamenti base...solo roba di basso livello</aside>
          </section>
          <section>
            <h3>non si può interagire col dom in modo diretto</h3>
            <ul>
              <li class="fragment">Prevenzione XSS</li>
              <li class="fragment">Platform dependence</li>
            </ul>
          </section>
          <section>
            <h3>Leggere/Modificare proprietà attributi degli elementi</h3>
            <pre class="language-js">
              <code data-trim data-line-numbers>
                classList.add();
                el.setAttribute();
                el.addEventListener('click', ...)
              </code>
            </pre>
            <ul>
              <li class="fragment">
                Versione dichiarativa: Data Binding / Event Binding
              </li>
              <li class="fragment">
                <a href="https://angular.io/api/core/Renderer2" target="_blank">Versione imperativa: Renderer</a>
              </li>
            </ul>
          </section>
          <section>
            <pre class="language-js">
              <code data-trim data-line-numbers="1-100|5">
                @Component({ template: 
                  '
                    &lt;p&gt;Lorem ipsum, dolor sit amet consectetur adipisicing elit. 
                    Ad nobis iste dolores alias, consequuntur provident exercitationem, 
                    &lt;span highlight&gt;quis amet veniam repellendus ratione&lt;/span&gt; 
                    voluptas dicta ipsa voluptatum ex rerum magnam quod deleniti.&lt;/p&gt;
                  ' 
                })
                export class AppComponent { }
              </code>
            </pre>
          </section>
          <section>
            <div class="r-stack">
              <pre class="language-js">
                <code data-trim data-line-numbers="1-100|4|5">
                  @Directive({ selector: '[highlight]' })
                  export class HighlightDirective {
                    
                    constructor(private elementRef: ElementRef) {
                      elementRef.nativeElement.style.backgroundColor = 'yellow';
                    }
                  }
                </code>
              </pre>
              <h1 class="fragment">NO!</h1>
            </div>
          </section>
          <section>
            <pre class="language-js">
              <code data-trim data-line-numbers="1-100|4-7|6|8-9">
                @Directive({ selector: '[highlight]' })
                export class HighlightDirective {
                  
                  constructor(
                    private elementRef: ElementRef, 
                    private renderer2: Renderer2
                  ) {
                    renderer2.setStyle(elementRef.nativeElement, 'backgroundColor', 'yellow')
                  }
                }
              </code>
            </pre>
            <aside class="notes">cos'è questo renderer? Astrazione</aside>
          </section>
          <section>
            <p>NgClass - NgStyle</p>
          </section>
          <section>
            <h3>Leggere/Modificare la struttura del DOM</h3>
            <img width="500" src="https://miro.medium.com/v2/resize:fit:1400/1*KenS9UunhuYwGD3xeoiXYw.png">
          </section>
          <section><h3>Ivy</h3></section>
          <section>
            <div class="diagram-flow">
              <div>
                Metadati
                <p style="font-size: 1rem;">informazioni nei decorator es. templates, classi</p>
              </div>
              <div>
                Compiler
              </div>
              <div>
                View
              </div>
            </div>
          </section>
          <section>
            <h2 style="display:flex; align-items: center; justify-content: center;">view <img style="margin-left:1rem" width="50" src="./img/tv-retro.png"></h2>
            <p class="fragment">
              Gruppo di elementi che Angular può creare, distruggere o, più in generale, 
              modificare in base ai dati e alle logiche definite nel componente e ne può controllare i cambiamenti (change detection)
            </p>
            <ul class="fragment">
              <li>component -> host view</li>
              <li>ng-template -> embedded view</li>
            </ul>
          </section>
          <section>
            <h3>Cosa contiene una view</h3>
            <ul>
              <li>istanza del componente (new SomeComponent())</li>
              <li>metadati: dati dei decorator es. template, querys, selector etc. </li>
              <li>lista di nodi del dom</li>
              <li>lista degli ultimi valori dei bindings</li>
              <li>stato: primo controllo | da controllare | distrutto</li>
            </ul>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100">
                @Component({
                  selector: 'a-component',
                  template: `
                    &lt;h1 *ngIf="showTitle"&gt;My title&lt;/h1&gt;
                    &lt;p [class.is-red]="someOtherLogic"&gt;My paragraph&lt;/p&gt;
                    &lt;another-component&gt;&lt;/another-component&gt;
                  `,
                })
                export class SomePageComponent {
                  showTitle = true;
                  someOtherLogic = false;
                } 
              </code>
            </pre>
          </section>
          <section data-auto-animate >
            <div class="two-screen-example">
              <pre class="language-javascript">
                <code data-trim data-line-numbers="1-100">
                  @Component({
                    selector: 'a-component',
                    template: `
                      &lt;ng-template [ngIf]="showTitle"&gt;
                        &lt;h1&gt;My title&lt;/h1&gt;
                      &lt;/ng-template&gt;
                      &lt;p [class.is-red]="someOtherLogic"&gt;Lorem ipsum...&lt;/p&gt;
                      &lt;another-component&gt;&lt;/another-component&gt;
                    `,
                  })
                  export class SomePageComponent {
                    showTitle = true;
                    someOtherLogic = false;
                  } 
                </code>
              </pre>
            </div>
          </section>
          <section data-auto-animate >
            <div class="two-screen-example">
              <pre class="language-javascript">
                <code data-trim data-line-numbers="1-100">
                  @Component({
                    selector: 'a-component',
                    template: `
                      &lt;ng-template [ngIf]="showTitle"&gt;
                        &lt;h1&gt;My title&lt;/h1&gt;
                      &lt;/ng-template&gt;
                      &lt;p [class.is-red]="someOtherLogic"&gt;Lorem ipsum...&lt;/p&gt;
                      &lt;another-component&gt;&lt;/another-component&gt;
                    `,
                  })
                  export class SomePageComponent {
                    showTitle = true;
                    someOtherLogic = false;
                  } 
                </code>
              </pre>
              <div class="ng-view" data-view-label="a-component host view">
                <div class="ng-view" data-view-label="embedded view">
                  <p>h1 element (My title)</p>
                </div>
                <p>paragraph element (Lorem ipsum...)</p>
                <div class="ng-view" data-view-label="another-component host view">
                  <p>altri elementi</p>
                  <p>altre view</p>
                  <p>...</p>
                </div>
              </div>
            </div>
          </section>
          <section data-auto-animate>
            <div class="two-screen-example">
              <pre class="language-javascript">
                <code data-trim data-line-numbers="12,4-6">
                  @Component({
                    selector: 'a-component',
                    template: `
                      &lt;ng-template [ngIf]="showTitle"&gt;
                        &lt;h1&gt;My title&lt;/h1&gt;
                      &lt;/ng-template&gt;
                      &lt;p [class.is-red]="someOtherLogic"&gt;Lorem ipsum...&lt;/p&gt;
                      &lt;another-component&gt;&lt;/another-component&gt;
                    `,
                  })
                  export class SomePageComponent {
                    showTitle = false;
                    someOtherLogic = false;
                  } 
                </code>
              </pre>
              <div class="ng-view" data-view-label="a-component host view">
                
                <p>paragraph element (Lorem ipsum...)</p>
                <div class="ng-view" data-view-label="another-component host view">
                  <p>altri elementi</p>
                  <p>altre view</p>
                  <p>...</p>
                </div>
              </div>
            </div>
          </section>
          <section data-auto-animate>
            <div class="two-screen-example">
              <pre class="language-javascript">
                <code data-trim data-line-numbers="12,4-6">
                  @Component({
                    selector: 'a-component',
                    template: `
                      &lt;ng-template [ngIf]="showTitle"&gt;
                        &lt;h1&gt;My title&lt;/h1&gt;
                      &lt;/ng-template&gt;
                      &lt;p [class.is-red]="someOtherLogic"&gt;Lorem ipsum...&lt;/p&gt;
                      &lt;another-component&gt;&lt;/another-component&gt;
                    `,
                  })
                  export class SomePageComponent {
                    showTitle = true;
                    someOtherLogic = false;
                  } 
                </code>
              </pre>
              <div class="ng-view" data-view-label="a-component host view">
                <div class="ng-view" data-view-label="embedded view">
                  <p>h1 element (My title)</p>
                </div>
                <p>paragraph element (Lorem ipsum...)</p>
                <div class="ng-view" data-view-label="another-component host view">
                  <p>altri elementi</p>
                  <p>altre view</p>
                  <p>...</p>
                </div>
              </div>
            </div>
          </section>
          <section data-auto-animate>
            <div class="two-screen-example">
              <pre class="language-javascript">
                <code data-trim data-line-numbers="13,7">
                  @Component({
                    selector: 'a-component',
                    template: `
                      &lt;ng-template [ngIf]="showTitle"&gt;
                        &lt;h1&gt;My title&lt;/h1&gt;
                      &lt;/ng-template&gt;
                      &lt;p [class.is-red]="someOtherLogic"&gt;Lorem ipsum...&lt;/p&gt;
                      &lt;another-component&gt;&lt;/another-component&gt;
                    `,
                  })
                  export class SomePageComponent {
                    showTitle = true;
                    someOtherLogic = true;
                  } 
                </code>
              </pre>
              <div class="ng-view" data-view-label="a-component host view">
                <div class="ng-view" data-view-label="embedded view">
                  <p>h1 element (My title)</p>
                </div>
                <p style="color: red;">paragraph element (Lorem ipsum...)</p>
                <div class="ng-view" data-view-label="another-component host view">
                  <p>altri elementi</p>
                  <p>altre view</p>
                  <p>...</p>
                </div>
              </div>
            </div>
          </section>
          <section>
            <div class="ng-view" data-view-label="app host view">
              <div class="ng-view" data-view-label="component-a host view">
                <div class="ng-view" data-view-label="embedded view">
                  <div class="ng-view" data-view-label="component-b host view">
                    <p>...</p>
                  </div>  
                </div>
                <div class="ng-view" style="margin-top: 1rem" data-view-label="component-c host view">
                  <p>altri elementi</p>
                  <p>altre view</p>
                  <p>...</p>
                </div>
                <p>...</p>
              </div>
            </div>
          </section>
          <section>
            <p><a href="https://angular.io/api/core/ViewRef">ViewRef</a></p>
            <p><a href="https://angular.io/api/core/EmbeddedViewRef">EmbeddedViewRef</a></p>
            <aside class="notes">in sostanza una view è un gruppo di elementi e le loro logiche di visualizzazione. 
              Le proprietà degli elementi di una view può cambiare (es. attributi), ma la struttura in termini di numero di elementi etc. no</aside>
          </section>
          
          <section>
            <h2 style="display:flex; align-items: center; justify-content: center;">
              view container 
                <div class="view-container">
                  <img width="30" src="./img/tv-retro.png"> 
                  <img width="30" src="./img/tv-retro.png"> 
                  <img width="30" src="./img/tv-retro.png">
                  <img width="30" src="./img/tv-retro.png">
                </div>
            </h2>
            <p class="fragment">
              contiene host views (componenti) e embedded views (ng-template) 
              andando a formare una gerarchia di views e 
              permette la manipolazione di questa gerarchia 
            </p>
            <p class="fragment">ogni elemento può essere un container di view</p>
          </section>
          <section>
            <p><a href="https://angular.io/api/core/ViewContainerRef" target="_blank">ViewContainerRef</a></p>
          </section>
          <section>
            <h3>creare una host view (componente)</h3>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100">
                import { SomeOtherComponent } from 'somewhere';

                @Component({
                  selector: 'a-component',
                  template: ``,
                })
                export class SomeComponent {
                  constructor(private vcr: ViewContainerRef) {
                    this.vcr.createComponent(SomeOtherComponent)
                  }
                } 
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|6,10|1-100">
                import { SomeOtherComponent } from 'somewhere';

                @Component({
                  selector: 'a-component',
                  template: `
                    &lt;h1 #ref&gt;I can be a view container&lt;/h1&gt;
                  `,
                })
                export class SomeComponent {
                  @ViewChild('ref', { read: ViewContainerRef }) unusualContainer;
                  
                  ngAfterViewInit() {
                    this.unusualContainer.createComponent(SomeOtherComponent)
                  }
                } 
              </code>
            </pre>
            <aside class="notes">il componente viene creato come sibling nel dom</aside>
          </section>
          <section>
            <h3>creare una embedded view (ng-template)</h3>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|4,10|12-16">
                @Component({
                  selector: 'a-component',
                  template: `
                    &lt;ng-template #ref&gt;
                      I'm hidden until they create me
                    &lt;/ng-template&gt;
                  `,
                })
                export class SomeComponent {
                  @ViewChild('ref', { read: TemplateRef }) tRef: TemplateRef;
                  
                  constructor(private vcr: ViewContainerRef) { }

                  ngAfterViewInit() {
                    this.vcr.createEmbeddedView(this.tRef)
                  }
                } 
              </code>
            </pre>
          </section>
          <section>
            <h3>embedded view context</h3>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="18-23|4-10">
                @Component({
                  selector: 'a-component',
                  template: `
                    &lt;ng-template 
                      #ref 
                      let-someVariable="some"
                      let-someImplicitVariable
                    &gt;
                      {{ someVariable }} {{ someImplicitVariable }}
                    &lt;/ng-template&gt;
                  `,
                })
                export class SomeComponent {
                  @ViewChild('ref', { read: TemplateRef }) tRef: TemplateRef;
                  
                  constructor(private vcr: ViewContainerRef) { }

                  ngAfterViewInit() {
                    this.vcr.createEmbeddedView(
                      this.tRef, 
                      { some: 'Data!', implicit$: 'whatever!'}
                    )
                  }
                } 
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                @Component({
                  selector: 'a-component',
                  template: `
                    &lt;div *ngIf="something$ | async as whatever"&gt;
                      {{ whatever }}
                    &lt;/div&gt;
                  `,
                })
                export class SomeComponent {
                  something$ = this.someService.getSomething();
                } 
              </code>
            </pre>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                @Component({
                  selector: 'a-component',
                  template: `
                    &lt;ng-template [ngIf]="something$ | async" let-whatever&gt;
                      &lt;div&gt;{{ whatever }}&lt;/div&gt;
                    &lt;/ng-template&gt;
                  `,
                })
                export class SomeComponent {
                  something$ = this.someService.getSomething();
                } 
              </code>
            </pre>
          </section>
          <section>
            <h2>
              <a href="https://angular.io/guide/structural-directives#creating-a-structural-directive" target="_blank">
                creating a structural directive
              </a>
            </h2>
          </section>

          <section>
            <h2><a href="https://github.com/angular/angular/tree/main/packages/common/src/directives">Common module directives</a></h2>
          </section>

          <section>
            <h2>change detection</h2>
            <p class="fragment">ricalcolo delle views sulla base dei cambiamenti dei bindings, confrontando i vecchi valori con i nuovi</p>
            <p class="fragment">Si basa sullo stato della view (primo controllo | da controllare | distrutto)</p>
            <p class="fragment">Ogni view ha un change detector</p>
          </section>

          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|12,14-17">
                @Component({
                  selector: 'a-component',
                  template: `
                    &lt;h1&gt;
                      {{ someText }}
                    &lt;/h1&gt;
                  `,
                })
                export class SomeComponent {
                  someText = 'Hello';

                  constructor(private cdr: ChangeDetectorRef) { }

                  ngAfterViewInit() {
                    // just in case
                    this.cdr.detectChanges()
                  }
                } 
              </code>
            </pre>
          </section>

          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1-100|12-14">
                @Component({
                  selector: 'a-component',
                  template: `
                    &lt;h1&gt;
                      {{ someText }}
                    &lt;/h1&gt;
                  `,
                })
                export class SomeComponent {
                  someText = 'Hello';

                  constructor(private cdr: ChangeDetectorRef) {
                    this.cdr.detach()
                  }
                } 
              </code>
            </pre>
          </section>

          <section>
            <img
              width="400"
              src="https://codecraft.tv/courses/angular/components/lifecycle-hooks/images/lifecycle-hooks.png"
              alt=""
            />
            <aside class="notes">ngDoCheck serve per eseguire logiche</aside>
          </section>

          <section>
            <h2>chi chiama la change detection?</h2>
          </section>

          <section>
            <h2>zone js</h2>
            <p class="fragment">Libreria che amplia le funzionalità native del browser in modo da tracciare gli eventi asincroni</p>
          </section>

          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers="1|3|4-8">
                const originalSetTimeout = setTimeout;

                window.setTimeout = function(cb, timer) {
                  setTimeout(() => {
                    trackStart();
                    cb();
                    trackEnd();
                  }, timer)
                }
              </code>
            </pre>
            <aside class="notes">monkeypatching</aside>
          </section>
          <section>
            <ul>
              <li>addEventListener</li>
              <li>setTimeout</li>
              <li>setInterval</li>
              <li>fetch</li>
              <li>rAF</li>
              <li>etc...</li>
            </ul>
          </section>
          <section>
            <pre class="language-javascript">
              <code data-trim data-line-numbers>
                ngZone.onMicrotaskEmpty.subscribe(() => application.tick())
              </code>
            </pre>
            <aside class="notes">potreste trovare setTimeout a caso nell'app</aside>
          </section>
          <section>
            <h2><a href="https://indepth.dev/" target="_blank">in depth</a></h2>
          </section>
        </section>

        <section>
          <h2>
            <a href="https://angular.io/guide/workspace-config" target="_blank"
              >Angular workspace configuration</a
            >
          </h2>
        </section>

        <section>
          <section><h2>Cosa abbiamo omesso</h2></section>
          <section>
            <h3>RXJS</h3>
            <ul>
              <li><a href="https://www.learnrxjs.io/" target="_blank">un mare di operators</li>
              <li><a href="https://medium.com/@jshvarts/read-marble-diagrams-like-a-pro-3d72934d3ef5" target="_blank">
                Come leggere un marble diagram
              </li>
              <li><a href="https://rxjs.dev/guide/subject" target="_blank">subjects</a></li>
              <li><a href="https://ngrx.io/" target="_blank">NgRx</a></li>
            </ul>
          </section>

          <section>
            <ul>
              <li>
                change detection strategies
              </li>
              <li>
                <a href="https://youtu.be/f8sA-i6gkGQ" target="_blank"
                  >strategie di ottimizzazione / profiling</a
                >
              </li>
              <li>custom schematics</li>
              <li>Testing</li>
              <li>Animations</li>
              <li>Progressive Web Apps</li>
              <li>Server Side Rendering</li>
            </ul>
          </section>
        </section>

        <section data-visibility="hidden">
          <section><h2>Subjects</h2></section>
          <section><h2>cold vs hot</h2></section>
          <section><h2>marble diagrams</h2></section>
          <section><h2>cancellare una subscription</h2></section>
          <section>
            <h3>More operators</h3>
          </section>
        </section>

        <section>
          <section><h1>Approfondimenti</h1></section>
          <section>
            <h3>reactive programming</h3>
            <ul>
              <li>
                <a
                  href="https://www.youtube.com/watch?v=fdol03pcvMA&ab_channel=UphillConf"
                  target="_blank"
                  >André Staltz: Two Fundamental Abstractions - Uphill Conf
                  2018</a
                >
              </li>
              <li>
                <a
                  href="https://www.youtube.com/watch?v=uQ1zhJHclvs&t=862s&ab_channel=ng-europe"
                  target="_blank"
                  >André Staltz: How rxjs works</a
                >
              </li>
              <li>
                <a
                  href="https://www.youtube.com/watch?v=3LKMwkuK0ZE&ab_channel=AngularConnect"
                  target="_blank"
                >
                  RxJS 5 Thinking Reactively | Ben Lesh
                </a>
              </li>
              <li>
                <a href="https://www.youtube.com/watch?v=Z76QlSpYcck&t=518s&ab_channel=ng-conf" target="_blank">
                  Data Composition with RxJS | Deborah Kurata
                </a>
              </li>
              <li>
                <a href="https://www.youtube.com/watch?v=-4cwkHNguXE&t=369s&ab_channel=ng-conf" target="_blank">
                  Thinking Reactively: Most Difficult | Mike Pearson
                </a>
              </li>
              <li>
                <a
                  href="https://www.youtube.com/watch?v=KOOT7BArVHQ&ab_channel=AngularConnect"
                  target="_blank"
                >
                  RxJS In-Depth – Ben Lesh
                </a>
              </li>
              <li>
                <a href="https://www.youtube.com/watch?v=XKfhGntZROQ&t=3142s&ab_channel=ng-conf">
                  RxJS Advanced Patterns – Operate Heavily Dynamic UI’s | Michael Hladky
                </a>
              </li>
            </ul>
          </section>
          <section>
            <h3>dependency injection</h3>
            <ul>
              <li>
                <a
                  href="https://www.youtube.com/playlist?list=PLX7eV3JL9sfmJ6AaZj9eDlAKrJrEul4Vz"
                  target="_blank"
                  >Dependency injection in Angular</a
                >
              </li>
            </ul>
          </section>
          <section>
            <h3>Forms</h3>
            <ul>
              <li>
                <a
                  href="https://www.youtube.com/playlist?list=PLX7eV3JL9sfkREmy-qxyNqLw73y76nOHm"
                  target="_blank"
                  >Angular material</a
                >
              </li>
              <li>
                <a
                  href="https://youtu.be/kVbLSN0AW-Y"
                  target="_blank"
                  rel="noopener noreferrer"
                >
                  The Control Value Accessor | Jennifer Wadella
                </a>
              </li>
            </ul>
          </section>
          <section>
            <h3>Dietro le quinte</h3>
            <ul>
              <li>
                <a
                  href="https://www.youtube.com/watch?v=3IqtmUscE_U&t=150s&ab_channel=ng-conf"
                  target="_blank"
                  >Brian Ford - Zones - NG-Conf 2014</a
                >
              </li>
              <li>
                <a href="https://www.youtube.com/watch?v=TRfDXG98_Qg&ab_channel=ng-conf">
                  Can you imagine a future without zones? | Maxim Koretskyi
                </a>
              </li>
              <li>
                <a 
                  href="https://www.youtube.com/watch?v=qWmqiYDrnDc&ab_channel=ngVikings" 
                  target="_blank"
                  >
                  Can't Touch This! What not to do to the DOM by Max NgWizard
                </a>
              </li>
              <li>
                <a href="https://www.youtube.com/watch?v=vz9cNCkaPsY&ab_channel=ng-conf" target="_blank">
                  Implementing advanced DOM manipulation scenarios - Maxim NgWizard Koretskyi
                </a>
              </li>
              <li>
                <a href="https://www.youtube.com/watch?v=WizqXZjztss&ab_channel=AngularAir" target="_blank">
                  ngAir 138 - Change Detection with Maxim Koretskyi
                </a>
              </li>
              <li>
                <a href="https://www.youtube.com/watch?v=anphffaCZrQ" target="_blank">
                  A deep dive into Angular compilation model
                </a>
              </li>
            </ul>
          </section>
        </section>
        <section>
          <section>
            <h1>Esercizi</h1>
            <h2>Creare un social network</h2>
          </section>
        </section>
      </div>
    </div>

    <script src="./dist/reveal.js"></script>
    <script src="./plugin/notes/notes.js"></script>
    <script src="./plugin/markdown/markdown.js"></script>
    <script src="./plugin/highlight/highlight.js"></script>
    <script src="./plugin/zoom/zoom.js"></script>
    <script>
      // More info about initialization & config:
      // - https://revealjs.com/initialization/
      // - https://revealjs.com/config/
      Reveal.initialize({
        hash: true,

        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [RevealMarkdown, RevealHighlight, RevealNotes, RevealZoom],
      });
    </script>
  </body>
</html>
